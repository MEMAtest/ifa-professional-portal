"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/clients/route";
exports.ids = ["app/api/clients/route"];
exports.modules = {

/***/ "./action-async-storage.external?8dda":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external?3d59":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external?16bc":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2Froute&page=%2Fapi%2Fclients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2Froute.ts&appDir=%2FUsers%2Fadeomosanya%2FDocuments%2Fifa-professional-portal%2Fifa-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fadeomosanya%2FDocuments%2Fifa-professional-portal%2Fifa-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2Froute&page=%2Fapi%2Fclients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2Froute.ts&appDir=%2FUsers%2Fadeomosanya%2FDocuments%2Fifa-professional-portal%2Fifa-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fadeomosanya%2FDocuments%2Fifa-professional-portal%2Fifa-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_adeomosanya_Documents_ifa_professional_portal_ifa_platform_src_app_api_clients_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/clients/route.ts */ \"(rsc)/./src/app/api/clients/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/clients/route\",\n        pathname: \"/api/clients\",\n        filename: \"route\",\n        bundlePath: \"app/api/clients/route\"\n    },\n    resolvedPagePath: \"/Users/adeomosanya/Documents/ifa-professional-portal/ifa-platform/src/app/api/clients/route.ts\",\n    nextConfigOutput,\n    userland: _Users_adeomosanya_Documents_ifa_professional_portal_ifa_platform_src_app_api_clients_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/clients/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbGllbnRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjbGllbnRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2xpZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFkZW9tb3NhbnlhJTJGRG9jdW1lbnRzJTJGaWZhLXByb2Zlc3Npb25hbC1wb3J0YWwlMkZpZmEtcGxhdGZvcm0lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGYWRlb21vc2FueWElMkZEb2N1bWVudHMlMkZpZmEtcHJvZmVzc2lvbmFsLXBvcnRhbCUyRmlmYS1wbGF0Zm9ybSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM4QztBQUMzSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYW5uZXRpYy1wbGF0Zm9ybS8/OGFkMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYWRlb21vc2FueWEvRG9jdW1lbnRzL2lmYS1wcm9mZXNzaW9uYWwtcG9ydGFsL2lmYS1wbGF0Zm9ybS9zcmMvYXBwL2FwaS9jbGllbnRzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jbGllbnRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2xpZW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2xpZW50cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9hZGVvbW9zYW55YS9Eb2N1bWVudHMvaWZhLXByb2Zlc3Npb25hbC1wb3J0YWwvaWZhLXBsYXRmb3JtL3NyYy9hcHAvYXBpL2NsaWVudHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2xpZW50cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2Froute&page=%2Fapi%2Fclients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2Froute.ts&appDir=%2FUsers%2Fadeomosanya%2FDocuments%2Fifa-professional-portal%2Fifa-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fadeomosanya%2FDocuments%2Fifa-professional-portal%2Fifa-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/clients/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/clients/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./src/lib/supabase/server.ts\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_auth_apiAuth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth/apiAuth */ \"(rsc)/./src/lib/auth/apiAuth.ts\");\n/* harmony import */ var _lib_logging_structured__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/logging/structured */ \"(rsc)/./src/lib/logging/structured.ts\");\n\n// src/app/api/clients/route.ts\n// ✅ FIXED: Returns RAW database data, no transformation\n\n\n\n// Force dynamic rendering\nconst dynamic = \"force-dynamic\";\nasync function GET(request) {\n    // Verify authentication\n    const auth = await (0,_lib_auth_apiAuth__WEBPACK_IMPORTED_MODULE_2__.getAuthContext)(request);\n    if (!auth.success) {\n        return auth.response;\n    }\n    const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n    const logger = (0,_lib_logging_structured__WEBPACK_IMPORTED_MODULE_3__.createRequestLogger)(request);\n    try {\n        logger.info(\"GET /api/clients - Fetching clients\");\n        const searchParams = request.nextUrl.searchParams;\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"20\");\n        const offset = (page - 1) * limit;\n        // Get filter parameters\n        const status = searchParams.getAll(\"status\");\n        const vulnerabilityStatus = searchParams.get(\"vulnerabilityStatus\");\n        const search = searchParams.get(\"search\");\n        const sortBy = searchParams.get(\"sortBy\") || \"updated_at\";\n        const sortOrder = searchParams.get(\"sortOrder\") || \"desc\";\n        // Build query\n        let query = supabase.from(\"clients\").select(\"*\", {\n            count: \"exact\"\n        });\n        // Apply filters\n        if (status.length > 0) {\n            query = query.in(\"status\", status);\n        }\n        if (vulnerabilityStatus && vulnerabilityStatus !== \"all\") {\n            if (vulnerabilityStatus === \"vulnerable\") {\n                // Check for true boolean values in JSONB\n                query = query.eq(\"vulnerability_assessment->>is_vulnerable\", \"true\");\n            } else if (vulnerabilityStatus === \"not_vulnerable\") {\n                // Check for false or null/missing values\n                query = query.or(\"vulnerability_assessment->>is_vulnerable.eq.false,vulnerability_assessment.is.null\");\n            }\n        }\n        if (search) {\n            query = query.or(`\n        personal_details->first_name.ilike.%${search}%,\n        personal_details->last_name.ilike.%${search}%,\n        client_ref.ilike.%${search}%,\n        contact_info->email.ilike.%${search}%\n      `);\n        }\n        // Apply sorting and pagination\n        query = query.order(sortBy, {\n            ascending: sortOrder === \"asc\"\n        }).range(offset, offset + limit - 1);\n        const { data: clients, error, count } = await query;\n        if (error) {\n            logger.error(\"Database error fetching clients\", error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n                success: false,\n                error: \"Failed to fetch clients\",\n                details: error.message\n            }, {\n                status: 500\n            });\n        }\n        logger.info(\"Clients fetched successfully\", {\n            count: clients?.length || 0,\n            total: count\n        });\n        // ✅ CRITICAL: Return RAW data, no transformation!\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            success: true,\n            clients: clients || [],\n            total: count || 0,\n            page,\n            limit,\n            totalPages: Math.ceil((count || 0) / limit)\n        });\n    } catch (error) {\n        logger.error(\"GET /api/clients error\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            success: false,\n            error: \"Internal server error\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    // Verify authentication\n    const auth = await (0,_lib_auth_apiAuth__WEBPACK_IMPORTED_MODULE_2__.getAuthContext)(request);\n    if (!auth.success) {\n        return auth.response;\n    }\n    const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n    const logger = (0,_lib_logging_structured__WEBPACK_IMPORTED_MODULE_3__.createRequestLogger)(request);\n    try {\n        logger.info(\"POST /api/clients - Creating new client\");\n        const body = await request.json();\n        // Prepare data for database (already in snake_case from frontend)\n        const clientData = {\n            client_ref: body.clientRef,\n            personal_details: body.personalDetails,\n            contact_info: body.contactInfo,\n            financial_profile: body.financialProfile,\n            vulnerability_assessment: body.vulnerabilityAssessment,\n            risk_profile: body.riskProfile,\n            status: body.status || \"prospect\",\n            advisor_id: auth.context?.advisorId || auth.context?.userId,\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        };\n        const { data: client, error } = await supabase.from(\"clients\").insert([\n            clientData\n        ]).select().single();\n        if (error) {\n            logger.error(\"Database error creating client\", error);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n                success: false,\n                error: \"Failed to create client\",\n                details: error.message\n            }, {\n                status: 500\n            });\n        }\n        logger.info(\"Client created successfully\", {\n            clientRef: client.client_ref\n        });\n        // ✅ Return RAW data\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            success: true,\n            client\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        logger.error(\"POST /api/clients error\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].json({\n            success: false,\n            error: \"Internal server error\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJQUFJLENBQUMsV0FDTDZDLE1BQU0sQ0FBQztZQUFDdEI7U0FBVyxFQUNuQnRCLE1BQU0sR0FDTjZDLE1BQU07UUFFVCxJQUFJbEMsT0FBTztZQUNUNUIsT0FBTzRCLEtBQUssQ0FBQyxrQ0FBa0NBO1lBQy9DLE9BQU90QyxrRkFBWUEsQ0FBQ3VDLElBQUksQ0FBQztnQkFDdkJoQyxTQUFTO2dCQUNUK0IsT0FBTztnQkFDUEUsU0FBU0YsTUFBTUcsT0FBTztZQUN4QixHQUFHO2dCQUFFdEIsUUFBUTtZQUFJO1FBQ25CO1FBRUFULE9BQU9DLElBQUksQ0FBQywrQkFBK0I7WUFBRXdDLFdBQVdtQixPQUFPcEIsVUFBVTtRQUFDO1FBRTFFLG9CQUFvQjtRQUNwQixPQUFPbEQsa0ZBQVlBLENBQUN1QyxJQUFJLENBQUM7WUFDdkJoQyxTQUFTO1lBQ1QrRDtRQUNGLEdBQUc7WUFBRW5ELFFBQVE7UUFBSTtJQUVuQixFQUFFLE9BQU9tQixPQUFPO1FBQ2Q1QixPQUFPNEIsS0FBSyxDQUFDLDJCQUEyQkE7UUFDeEMsT0FBT3RDLGtGQUFZQSxDQUFDdUMsSUFBSSxDQUFDO1lBQ3ZCaEMsU0FBUztZQUNUK0IsT0FBTztZQUNQRSxTQUFTRixpQkFBaUJRLFFBQVFSLE1BQU1HLE9BQU8sR0FBRztRQUNwRCxHQUFHO1lBQUV0QixRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYW5uZXRpYy1wbGF0Zm9ybS8uL3NyYy9hcHAvYXBpL2NsaWVudHMvcm91dGUudHM/M2JlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQC9saWIvc3VwYWJhc2Uvc2VydmVyXCJcbi8vIHNyYy9hcHAvYXBpL2NsaWVudHMvcm91dGUudHNcbi8vIOKchSBGSVhFRDogUmV0dXJucyBSQVcgZGF0YWJhc2UgZGF0YSwgbm8gdHJhbnNmb3JtYXRpb25cblxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldEF1dGhDb250ZXh0IH0gZnJvbSAnQC9saWIvYXV0aC9hcGlBdXRoJztcbmltcG9ydCB7IGNyZWF0ZVJlcXVlc3RMb2dnZXIgfSBmcm9tICdAL2xpYi9sb2dnaW5nL3N0cnVjdHVyZWQnO1xuXG4vLyBGb3JjZSBkeW5hbWljIHJlbmRlcmluZ1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgLy8gVmVyaWZ5IGF1dGhlbnRpY2F0aW9uXG4gIGNvbnN0IGF1dGggPSBhd2FpdCBnZXRBdXRoQ29udGV4dChyZXF1ZXN0KTtcbiAgaWYgKCFhdXRoLnN1Y2Nlc3MpIHtcbiAgICByZXR1cm4gYXV0aC5yZXNwb25zZSE7XG4gIH1cblxuICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpXG4gIGNvbnN0IGxvZ2dlciA9IGNyZWF0ZVJlcXVlc3RMb2dnZXIocmVxdWVzdClcbiAgdHJ5IHtcbiAgICBsb2dnZXIuaW5mbygnR0VUIC9hcGkvY2xpZW50cyAtIEZldGNoaW5nIGNsaWVudHMnKTtcbiAgICBcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zO1xuICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdwYWdlJykgfHwgJzEnKTtcbiAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2xpbWl0JykgfHwgJzIwJyk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuICAgIFxuICAgIC8vIEdldCBmaWx0ZXIgcGFyYW1ldGVyc1xuICAgIGNvbnN0IHN0YXR1cyA9IHNlYXJjaFBhcmFtcy5nZXRBbGwoJ3N0YXR1cycpO1xuICAgIGNvbnN0IHZ1bG5lcmFiaWxpdHlTdGF0dXMgPSBzZWFyY2hQYXJhbXMuZ2V0KCd2dWxuZXJhYmlsaXR5U3RhdHVzJyk7XG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldCgnc2VhcmNoJyk7XG4gICAgY29uc3Qgc29ydEJ5ID0gc2VhcmNoUGFyYW1zLmdldCgnc29ydEJ5JykgfHwgJ3VwZGF0ZWRfYXQnO1xuICAgIGNvbnN0IHNvcnRPcmRlciA9IHNlYXJjaFBhcmFtcy5nZXQoJ3NvcnRPcmRlcicpIHx8ICdkZXNjJztcbiAgICBcbiAgICAvLyBCdWlsZCBxdWVyeVxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnY2xpZW50cycpXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JyB9KTtcbiAgICBcbiAgICAvLyBBcHBseSBmaWx0ZXJzXG4gICAgaWYgKHN0YXR1cy5sZW5ndGggPiAwKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmluKCdzdGF0dXMnLCBzdGF0dXMpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodnVsbmVyYWJpbGl0eVN0YXR1cyAmJiB2dWxuZXJhYmlsaXR5U3RhdHVzICE9PSAnYWxsJykge1xuICAgICAgaWYgKHZ1bG5lcmFiaWxpdHlTdGF0dXMgPT09ICd2dWxuZXJhYmxlJykge1xuICAgICAgICAvLyBDaGVjayBmb3IgdHJ1ZSBib29sZWFuIHZhbHVlcyBpbiBKU09OQlxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCd2dWxuZXJhYmlsaXR5X2Fzc2Vzc21lbnQtPj5pc192dWxuZXJhYmxlJywgJ3RydWUnKTtcbiAgICAgIH0gZWxzZSBpZiAodnVsbmVyYWJpbGl0eVN0YXR1cyA9PT0gJ25vdF92dWxuZXJhYmxlJykge1xuICAgICAgICAvLyBDaGVjayBmb3IgZmFsc2Ugb3IgbnVsbC9taXNzaW5nIHZhbHVlc1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKCd2dWxuZXJhYmlsaXR5X2Fzc2Vzc21lbnQtPj5pc192dWxuZXJhYmxlLmVxLmZhbHNlLHZ1bG5lcmFiaWxpdHlfYXNzZXNzbWVudC5pcy5udWxsJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChzZWFyY2gpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkub3IoYFxuICAgICAgICBwZXJzb25hbF9kZXRhaWxzLT5maXJzdF9uYW1lLmlsaWtlLiUke3NlYXJjaH0lLFxuICAgICAgICBwZXJzb25hbF9kZXRhaWxzLT5sYXN0X25hbWUuaWxpa2UuJSR7c2VhcmNofSUsXG4gICAgICAgIGNsaWVudF9yZWYuaWxpa2UuJSR7c2VhcmNofSUsXG4gICAgICAgIGNvbnRhY3RfaW5mby0+ZW1haWwuaWxpa2UuJSR7c2VhcmNofSVcbiAgICAgIGApO1xuICAgIH1cbiAgICBcbiAgICAvLyBBcHBseSBzb3J0aW5nIGFuZCBwYWdpbmF0aW9uXG4gICAgcXVlcnkgPSBxdWVyeVxuICAgICAgLm9yZGVyKHNvcnRCeSwgeyBhc2NlbmRpbmc6IHNvcnRPcmRlciA9PT0gJ2FzYycgfSlcbiAgICAgIC5yYW5nZShvZmZzZXQsIG9mZnNldCArIGxpbWl0IC0gMSk7XG4gICAgXG4gICAgY29uc3QgeyBkYXRhOiBjbGllbnRzLCBlcnJvciwgY291bnQgfSA9IGF3YWl0IHF1ZXJ5O1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0RhdGFiYXNlIGVycm9yIGZldGNoaW5nIGNsaWVudHMnLCBlcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggY2xpZW50cycsXG4gICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuICAgIFxuICAgIGxvZ2dlci5pbmZvKCdDbGllbnRzIGZldGNoZWQgc3VjY2Vzc2Z1bGx5JywgeyBjb3VudDogY2xpZW50cz8ubGVuZ3RoIHx8IDAsIHRvdGFsOiBjb3VudCB9KTtcbiAgICBcbiAgICAvLyDinIUgQ1JJVElDQUw6IFJldHVybiBSQVcgZGF0YSwgbm8gdHJhbnNmb3JtYXRpb24hXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjbGllbnRzOiBjbGllbnRzIHx8IFtdLCAvLyBSQVcgZGF0YWJhc2UgZGF0YVxuICAgICAgdG90YWw6IGNvdW50IHx8IDAsXG4gICAgICBwYWdlLFxuICAgICAgbGltaXQsXG4gICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwoKGNvdW50IHx8IDApIC8gbGltaXQpXG4gICAgfSk7XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdHRVQgL2FwaS9jbGllbnRzIGVycm9yJywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAvLyBWZXJpZnkgYXV0aGVudGljYXRpb25cbiAgY29uc3QgYXV0aCA9IGF3YWl0IGdldEF1dGhDb250ZXh0KHJlcXVlc3QpO1xuICBpZiAoIWF1dGguc3VjY2Vzcykge1xuICAgIHJldHVybiBhdXRoLnJlc3BvbnNlITtcbiAgfVxuXG4gIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KClcbiAgY29uc3QgbG9nZ2VyID0gY3JlYXRlUmVxdWVzdExvZ2dlcihyZXF1ZXN0KVxuICB0cnkge1xuICAgIGxvZ2dlci5pbmZvKCdQT1NUIC9hcGkvY2xpZW50cyAtIENyZWF0aW5nIG5ldyBjbGllbnQnKTtcbiAgICBcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgXG4gICAgLy8gUHJlcGFyZSBkYXRhIGZvciBkYXRhYmFzZSAoYWxyZWFkeSBpbiBzbmFrZV9jYXNlIGZyb20gZnJvbnRlbmQpXG4gICAgY29uc3QgY2xpZW50RGF0YSA9IHtcbiAgICAgIGNsaWVudF9yZWY6IGJvZHkuY2xpZW50UmVmLFxuICAgICAgcGVyc29uYWxfZGV0YWlsczogYm9keS5wZXJzb25hbERldGFpbHMsXG4gICAgICBjb250YWN0X2luZm86IGJvZHkuY29udGFjdEluZm8sXG4gICAgICBmaW5hbmNpYWxfcHJvZmlsZTogYm9keS5maW5hbmNpYWxQcm9maWxlLFxuICAgICAgdnVsbmVyYWJpbGl0eV9hc3Nlc3NtZW50OiBib2R5LnZ1bG5lcmFiaWxpdHlBc3Nlc3NtZW50LFxuICAgICAgcmlza19wcm9maWxlOiBib2R5LnJpc2tQcm9maWxlLFxuICAgICAgc3RhdHVzOiBib2R5LnN0YXR1cyB8fCAncHJvc3BlY3QnLFxuICAgICAgYWR2aXNvcl9pZDogYXV0aC5jb250ZXh0Py5hZHZpc29ySWQgfHwgYXV0aC5jb250ZXh0Py51c2VySWQsIC8vIExpbmsgdG8gY3VycmVudCBhZHZpc29yXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IHsgZGF0YTogY2xpZW50LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjbGllbnRzJylcbiAgICAgIC5pbnNlcnQoW2NsaWVudERhdGFdKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0RhdGFiYXNlIGVycm9yIGNyZWF0aW5nIGNsaWVudCcsIGVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgY2xpZW50JyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZVxuICAgICAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9XG5cbiAgICBsb2dnZXIuaW5mbygnQ2xpZW50IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyBjbGllbnRSZWY6IGNsaWVudC5jbGllbnRfcmVmIH0pO1xuICAgIFxuICAgIC8vIOKchSBSZXR1cm4gUkFXIGRhdGFcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGNsaWVudCAvLyBSQVcgZGF0YWJhc2UgZGF0YVxuICAgIH0sIHsgc3RhdHVzOiAyMDEgfSk7XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKCdQT1NUIC9hcGkvY2xpZW50cyBlcnJvcicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiTmV4dFJlc3BvbnNlIiwiZ2V0QXV0aENvbnRleHQiLCJjcmVhdGVSZXF1ZXN0TG9nZ2VyIiwiZHluYW1pYyIsIkdFVCIsInJlcXVlc3QiLCJhdXRoIiwic3VjY2VzcyIsInJlc3BvbnNlIiwic3VwYWJhc2UiLCJsb2dnZXIiLCJpbmZvIiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInBhZ2UiLCJwYXJzZUludCIsImdldCIsImxpbWl0Iiwib2Zmc2V0Iiwic3RhdHVzIiwiZ2V0QWxsIiwidnVsbmVyYWJpbGl0eVN0YXR1cyIsInNlYXJjaCIsInNvcnRCeSIsInNvcnRPcmRlciIsInF1ZXJ5IiwiZnJvbSIsInNlbGVjdCIsImNvdW50IiwibGVuZ3RoIiwiaW4iLCJlcSIsIm9yIiwib3JkZXIiLCJhc2NlbmRpbmciLCJyYW5nZSIsImRhdGEiLCJjbGllbnRzIiwiZXJyb3IiLCJqc29uIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsIkVycm9yIiwiUE9TVCIsImJvZHkiLCJjbGllbnREYXRhIiwiY2xpZW50X3JlZiIsImNsaWVudFJlZiIsInBlcnNvbmFsX2RldGFpbHMiLCJwZXJzb25hbERldGFpbHMiLCJjb250YWN0X2luZm8iLCJjb250YWN0SW5mbyIsImZpbmFuY2lhbF9wcm9maWxlIiwiZmluYW5jaWFsUHJvZmlsZSIsInZ1bG5lcmFiaWxpdHlfYXNzZXNzbWVudCIsInZ1bG5lcmFiaWxpdHlBc3Nlc3NtZW50Iiwicmlza19wcm9maWxlIiwicmlza1Byb2ZpbGUiLCJhZHZpc29yX2lkIiwiY29udGV4dCIsImFkdmlzb3JJZCIsInVzZXJJZCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwiY2xpZW50IiwiaW5zZXJ0Iiwic2luZ2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/clients/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth/apiAuth.ts":
/*!*********************************!*\
  !*** ./src/lib/auth/apiAuth.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ROLES: () => (/* binding */ ROLES),\n/* harmony export */   canAccessClient: () => (/* binding */ canAccessClient),\n/* harmony export */   canModifyDocument: () => (/* binding */ canModifyDocument),\n/* harmony export */   checkPermission: () => (/* binding */ checkPermission),\n/* harmony export */   getAdvisorProfile: () => (/* binding */ getAdvisorProfile),\n/* harmony export */   getAuthContext: () => (/* binding */ getAuthContext),\n/* harmony export */   getFirmDetails: () => (/* binding */ getFirmDetails),\n/* harmony export */   getValidatedFirmId: () => (/* binding */ getValidatedFirmId),\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission),\n/* harmony export */   isAdmin: () => (/* binding */ isAdmin),\n/* harmony export */   isAdvisor: () => (/* binding */ isAdvisor),\n/* harmony export */   isCompliance: () => (/* binding */ isCompliance),\n/* harmony export */   requireFirmId: () => (/* binding */ requireFirmId),\n/* harmony export */   requirePermission: () => (/* binding */ requirePermission),\n/* harmony export */   validateAuth: () => (/* binding */ validateAuth),\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./src/lib/supabase/server.ts\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// ================================================================\n// API Authentication Helper\n// Provides consistent auth checking across all API routes\n// ================================================================\n\n\n\n// ================================================================\n// AUTH HELPER FUNCTIONS\n// ================================================================\nfunction getDefaultFirmId() {\n    const envDefaultFirmId = process.env.DEFAULT_FIRM_ID ?? process.env.NEXT_PUBLIC_DEFAULT_FIRM_ID;\n    return typeof envDefaultFirmId === \"string\" && envDefaultFirmId.trim() ? envDefaultFirmId.trim() : null;\n}\nfunction normalizeOptionalString(value) {\n    if (typeof value !== \"string\") return null;\n    const trimmed = value.trim();\n    return trimmed ? trimmed : null;\n}\nfunction normalizeFirmId(value) {\n    const trimmed = normalizeOptionalString(value);\n    if (!trimmed) return null;\n    // Avoid legacy placeholder values leaking into firm-scoped queries.\n    if (trimmed === \"default-firm\") return null;\n    return trimmed;\n}\nfunction decodeBase64Url(value) {\n    try {\n        const base64 = value.replace(/-/g, \"+\").replace(/_/g, \"/\");\n        const padded = base64 + \"=\".repeat((4 - base64.length % 4) % 4);\n        if (typeof Buffer !== \"undefined\") {\n            return Buffer.from(padded, \"base64\").toString(\"utf8\");\n        }\n        if (typeof globalThis.atob === \"function\") {\n            return globalThis.atob(padded);\n        }\n    } catch  {\n    // ignore\n    }\n    return null;\n}\nfunction extractAccessTokenFromSessionPayload(payload) {\n    if (!payload || typeof payload !== \"object\") return null;\n    const obj = payload;\n    const direct = normalizeOptionalString(obj.access_token);\n    if (direct) return direct;\n    const current = normalizeOptionalString(obj.currentSession?.access_token);\n    if (current) return current;\n    const nested = normalizeOptionalString(obj.data?.session?.access_token);\n    if (nested) return nested;\n    return null;\n}\nfunction getSupabaseProjectRefFromEnv() {\n    const url = \"https://maandodhonjolrmcxivo.supabase.co\";\n    if (!url) return null;\n    try {\n        const hostname = new URL(url).hostname;\n        const ref = hostname.split(\".\")[0];\n        return ref ? ref : null;\n    } catch  {\n        return null;\n    }\n}\nfunction parseCookieHeader(cookieHeader) {\n    if (!cookieHeader) return {};\n    const result = {};\n    const parts = cookieHeader.split(\";\");\n    for (const part of parts){\n        const [rawName, ...rest] = part.trim().split(\"=\");\n        const name = rawName?.trim();\n        if (!name) continue;\n        const value = rest.join(\"=\");\n        result[name] = value;\n    }\n    return result;\n}\nfunction readChunkedCookie(cookies, key) {\n    if (cookies[key]) return cookies[key];\n    const chunks = [];\n    for (const [name, value] of Object.entries(cookies)){\n        if (!name.startsWith(`${key}.`)) continue;\n        const suffix = name.slice(key.length + 1);\n        const idx = Number.parseInt(suffix, 10);\n        if (Number.isNaN(idx)) continue;\n        chunks.push({\n            idx,\n            value\n        });\n    }\n    if (chunks.length === 0) return null;\n    chunks.sort((a, b)=>a.idx - b.idx);\n    return chunks.map((c)=>c.value).join(\"\");\n}\nfunction extractAccessTokenFromSupabaseCookie(request) {\n    const cookieHeader = request.headers.get(\"cookie\");\n    if (!cookieHeader) return null;\n    const cookies = parseCookieHeader(cookieHeader);\n    const ref = getSupabaseProjectRefFromEnv();\n    const primaryKey = ref ? `sb-${ref}-auth-token` : null;\n    const candidateKeys = [];\n    if (primaryKey) candidateKeys.push(primaryKey);\n    for (const name of Object.keys(cookies)){\n        if (!name.startsWith(\"sb-\")) continue;\n        if (!name.includes(\"auth-token\")) continue;\n        // Use the base key (without .0/.1...) so we can reassemble chunks.\n        const base = name.split(\".\")[0];\n        if (!candidateKeys.includes(base)) candidateKeys.push(base);\n    }\n    for (const key of candidateKeys){\n        const raw = readChunkedCookie(cookies, key);\n        if (!raw) continue;\n        // supabase/ssr prefixes base64url-encoded cookie values with \"base64-\".\n        const decodedValue = raw.startsWith(\"base64-\") ? decodeBase64Url(raw.slice(\"base64-\".length)) : raw;\n        if (!decodedValue) continue;\n        const parsed = (()=>{\n            try {\n                return JSON.parse(decodedValue);\n            } catch  {\n                return null;\n            }\n        })();\n        const token = extractAccessTokenFromSessionPayload(parsed);\n        if (token) return token;\n    }\n    return null;\n}\n/**\n * Get authenticated user context for API routes\n * Returns user info and related context (firm, advisor, etc.)\n */ async function getAuthContext(request) {\n    try {\n        const authHeader = request.headers.get(\"authorization\") ?? request.headers.get(\"Authorization\");\n        const bearerToken = authHeader?.startsWith(\"Bearer \") ? authHeader.slice(\"Bearer \".length).trim() : null;\n        const cookieAccessToken = extractAccessTokenFromSupabaseCookie(request);\n        // Prefer cookie-based auth (best for SSR), but allow a Bearer token fallback\n        // to support clients that store sessions outside cookies.\n        let supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        let user = null;\n        let authError = null;\n        const cookieResult = await supabase.auth.getUser();\n        user = cookieResult.data.user;\n        authError = cookieResult.error;\n        const tokenCandidates = [\n            bearerToken,\n            cookieAccessToken\n        ].filter((value)=>typeof value === \"string\" && value.trim().length > 0);\n        if ((!user || authError) && tokenCandidates.length > 0) {\n            const url = \"https://maandodhonjolrmcxivo.supabase.co\";\n            const anonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYW5kb2Rob25qb2xybWN4aXZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg1NDg3NjIsImV4cCI6MjA2NDEyNDc2Mn0.Ku89ldqO_b1ptFBQFtQPhzmmnrg04LpcMeCw21sjlAE\";\n            if (!url || !anonKey) {\n                return {\n                    success: false,\n                    error: \"Authentication failed\",\n                    response: next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: \"Authentication error\",\n                        message: \"Supabase credentials are not configured\"\n                    }, {\n                        status: 500\n                    })\n                };\n            }\n            for (const token of tokenCandidates){\n                const tokenClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(url, anonKey, {\n                    global: {\n                        headers: {\n                            Authorization: `Bearer ${token}`\n                        }\n                    },\n                    auth: {\n                        persistSession: false,\n                        autoRefreshToken: false,\n                        detectSessionInUrl: false\n                    }\n                });\n                const tokenResult = await tokenClient.auth.getUser(token);\n                user = tokenResult.data.user;\n                authError = tokenResult.error;\n                // Repoint supabase client to one that will include the token for DB reads.\n                if (user) {\n                    supabase = tokenClient;\n                    break;\n                }\n            }\n        }\n        if (authError || !user) {\n            return {\n                success: false,\n                error: \"Unauthorized - Please log in\",\n                response: next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Unauthorized\",\n                    message: \"Please log in to access this resource\"\n                }, {\n                    status: 401\n                })\n            };\n        }\n        // Get user profile with role and firm info\n        const { data: profile } = await supabase.from(\"profiles\").select(\"role, firm_id, advisor_id\").eq(\"id\", user.id).single();\n        const metadata = user.user_metadata ?? {};\n        const metadataRole = metadata.role ?? null;\n        const metadataFirmId = metadata.firm_id ?? metadata.firmId ?? null;\n        const metadataAdvisorId = metadata.advisor_id ?? metadata.advisorId ?? null;\n        const defaultFirmId = getDefaultFirmId();\n        const firmId = normalizeFirmId(profile?.firm_id) ?? normalizeFirmId(metadataFirmId) ?? normalizeFirmId(defaultFirmId);\n        const context = {\n            user,\n            userId: user.id,\n            email: user.email,\n            role: normalizeOptionalString(profile?.role) || normalizeOptionalString(metadataRole),\n            firmId,\n            advisorId: normalizeOptionalString(profile?.advisor_id) || normalizeOptionalString(metadataAdvisorId) || user.id\n        };\n        return {\n            success: true,\n            context\n        };\n    } catch (error) {\n        console.error(\"[Auth] Error getting auth context:\", error);\n        return {\n            success: false,\n            error: \"Authentication failed\",\n            response: next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Authentication error\",\n                message: \"Failed to verify authentication\"\n            }, {\n                status: 500\n            })\n        };\n    }\n}\n/**\n * Validate auth with specific requirements\n */ async function validateAuth(request, options = {}) {\n    const { requireAuth = true, requireRole, allowPublic = false } = options;\n    // Allow public access if specified\n    if (allowPublic) {\n        const authResult = await getAuthContext(request);\n        return authResult.success ? authResult : {\n            success: true\n        };\n    }\n    // Check authentication\n    if (!requireAuth) {\n        return {\n            success: true\n        };\n    }\n    const authResult = await getAuthContext(request);\n    if (!authResult.success) {\n        return authResult;\n    }\n    // Check role requirements\n    if (requireRole && requireRole.length > 0 && authResult.context) {\n        const userRole = authResult.context.role;\n        if (!userRole || !requireRole.includes(userRole)) {\n            return {\n                success: false,\n                error: \"Insufficient permissions\",\n                response: next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Forbidden\",\n                    message: \"You do not have permission to access this resource\",\n                    requiredRoles: requireRole\n                }, {\n                    status: 403\n                })\n            };\n        }\n    }\n    return authResult;\n}\n/**\n * Higher-order function to wrap API handlers with auth\n */ function withAuth(handler, options = {}) {\n    return async (request, ...args)=>{\n        const authResult = await validateAuth(request, options);\n        if (!authResult.success || authResult.response) {\n            return authResult.response || next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        // If auth is optional and no context, provide empty context\n        const context = authResult.context || {\n            user: null,\n            userId: \"\",\n            email: undefined,\n            role: null,\n            firmId: null,\n            advisorId: null\n        };\n        return handler(request, context, ...args);\n    };\n}\n/**\n * Get the current advisor's profile\n */ async function getAdvisorProfile(userId) {\n    try {\n        const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        const { data: profile, error } = await supabase.from(\"profiles\").select(`\n        id,\n        email,\n        full_name,\n        role,\n        firm_id,\n        advisor_id,\n        phone,\n        avatar_url,\n        created_at,\n        updated_at\n      `).eq(\"id\", userId).single();\n        if (error) {\n            console.error(\"[Auth] Error fetching advisor profile:\", error);\n            return null;\n        }\n        return profile;\n    } catch (error) {\n        console.error(\"[Auth] Error in getAdvisorProfile:\", error);\n        return null;\n    }\n}\n/**\n * Get firm details for the current user\n */ async function getFirmDetails(firmId) {\n    try {\n        const supabase = await (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        const { data: firm, error } = await supabase.from(\"firms\").select(\"*\").eq(\"id\", firmId).single();\n        if (error) {\n            console.error(\"[Auth] Error fetching firm details:\", error);\n            return null;\n        }\n        return firm;\n    } catch (error) {\n        console.error(\"[Auth] Error in getFirmDetails:\", error);\n        return null;\n    }\n}\n// ================================================================\n// ROLE CONSTANTS\n// ================================================================\nconst ROLES = {\n    ADMIN: \"admin\",\n    ADVISOR: \"advisor\",\n    COMPLIANCE: \"compliance\",\n    SUPPORT: \"support\",\n    CLIENT: \"client\"\n};\n// ================================================================\n// PERMISSION HELPERS\n// ================================================================\nfunction canAccessClient(authContext, clientAdvisorId) {\n    // Admins can access all clients\n    if (authContext.role === ROLES.ADMIN) return true;\n    // Advisors can only access their own clients\n    return authContext.advisorId === clientAdvisorId;\n}\nfunction canModifyDocument(authContext, documentAdvisorId) {\n    if (authContext.role === ROLES.ADMIN) return true;\n    if (authContext.role === ROLES.COMPLIANCE) return true;\n    return authContext.advisorId === documentAdvisorId;\n}\nfunction isAdmin(authContext) {\n    return authContext.role === ROLES.ADMIN;\n}\nfunction isAdvisor(authContext) {\n    return authContext.role === ROLES.ADVISOR || authContext.role === ROLES.ADMIN;\n}\nfunction isCompliance(authContext) {\n    return authContext.role === ROLES.COMPLIANCE || authContext.role === ROLES.ADMIN;\n}\n/**\n * Role-based permission matrix\n */ const ROLE_PERMISSIONS = {\n    admin: [\n        \"clients:read\",\n        \"clients:write\",\n        \"clients:delete\",\n        \"assessments:read\",\n        \"assessments:write\",\n        \"assessments:delete\",\n        \"documents:read\",\n        \"documents:write\",\n        \"documents:delete\",\n        \"documents:sign\",\n        \"reports:read\",\n        \"reports:generate\",\n        \"admin:users\",\n        \"admin:settings\",\n        \"admin:audit\"\n    ],\n    advisor: [\n        \"clients:read\",\n        \"clients:write\",\n        \"assessments:read\",\n        \"assessments:write\",\n        \"documents:read\",\n        \"documents:write\",\n        \"documents:sign\",\n        \"reports:read\",\n        \"reports:generate\"\n    ],\n    compliance: [\n        \"clients:read\",\n        \"assessments:read\",\n        \"documents:read\",\n        \"documents:write\",\n        \"reports:read\",\n        \"reports:generate\",\n        \"admin:audit\"\n    ],\n    support: [\n        \"clients:read\",\n        \"assessments:read\",\n        \"documents:read\",\n        \"reports:read\"\n    ],\n    client: [\n        \"assessments:read\",\n        \"documents:read\",\n        \"documents:sign\"\n    ]\n};\n/**\n * Check if a role has a specific permission\n */ function hasPermission(role, permission) {\n    if (!role) return false;\n    const permissions = ROLE_PERMISSIONS[role];\n    return permissions?.includes(permission) ?? false;\n}\n/**\n * Check if auth context has a specific permission\n */ function checkPermission(authContext, permission) {\n    return hasPermission(authContext.role, permission);\n}\n/**\n * Require specific permission, returns error response if not authorized\n */ function requirePermission(authContext, permission) {\n    if (!checkPermission(authContext, permission)) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Forbidden\",\n            message: `Missing required permission: ${permission}`,\n            timestamp: new Date().toISOString()\n        }, {\n            status: 403\n        });\n    }\n    return null;\n}\n// ================================================================\n// FIRM ID VALIDATION (NO HARDCODED FALLBACKS)\n// ================================================================\n/**\n * Get firm ID from auth context with validation\n * IMPORTANT: Does NOT use hardcoded fallbacks for security\n */ function getValidatedFirmId(authContext) {\n    const firmId = authContext.firmId;\n    // Validate UUID format\n    if (!firmId) return null;\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    if (!uuidRegex.test(firmId)) {\n        console.warn(\"[Auth] Invalid firm ID format:\", firmId);\n        return null;\n    }\n    // Reject known test/placeholder UUIDs\n    const invalidIds = [\n        \"00000000-0000-0000-0000-000000000000\",\n        \"00000000-0000-0000-0000-000000000001\",\n        \"12345678-1234-1234-1234-123456789012\"\n    ];\n    if (invalidIds.includes(firmId)) {\n        console.warn(\"[Auth] Rejected placeholder firm ID:\", firmId);\n        return null;\n    }\n    return firmId;\n}\n/**\n * Require firm ID, returns error response if missing\n */ function requireFirmId(authContext) {\n    const firmId = getValidatedFirmId(authContext);\n    if (!firmId) {\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Firm ID required\",\n            message: \"Your account is not associated with a firm. Please contact support.\",\n            timestamp: new Date().toISOString()\n        }, {\n            status: 403\n        });\n    }\n    return {\n        firmId\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVM7WUFDVEwsT0FBTztZQUNQUSxTQUFTLENBQUMsNkJBQTZCLEVBQUVpRSxXQUFXLENBQUM7WUFDckRJLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQyxHQUNBO1lBQUV0RSxRQUFRO1FBQUk7SUFFbEI7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxtRUFBbUU7QUFDbkUsOENBQThDO0FBQzlDLG1FQUFtRTtBQUVuRTs7O0NBR0MsR0FDTSxTQUFTdUUsbUJBQW1CckIsV0FBd0I7SUFDekQsTUFBTS9CLFNBQVMrQixZQUFZL0IsTUFBTTtJQUVqQyx1QkFBdUI7SUFDdkIsSUFBSSxDQUFDQSxRQUFRLE9BQU87SUFFcEIsTUFBTXFELFlBQVk7SUFDbEIsSUFBSSxDQUFDQSxVQUFVQyxJQUFJLENBQUN0RCxTQUFTO1FBQzNCUSxRQUFRK0MsSUFBSSxDQUFDLGtDQUFrQ3ZEO1FBQy9DLE9BQU87SUFDVDtJQUVBLHNDQUFzQztJQUN0QyxNQUFNd0QsYUFBYTtRQUNqQjtRQUNBO1FBQ0E7S0FDRDtJQUVELElBQUlBLFdBQVd0RyxRQUFRLENBQUM4QyxTQUFTO1FBQy9CUSxRQUFRK0MsSUFBSSxDQUFDLHdDQUF3Q3ZEO1FBQ3JELE9BQU87SUFDVDtJQUVBLE9BQU9BO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLFNBQVN5RCxjQUFjMUIsV0FBd0I7SUFDcEQsTUFBTS9CLFNBQVNvRCxtQkFBbUJyQjtJQUVsQyxJQUFJLENBQUMvQixRQUFRO1FBQ1gsT0FBTzNILGtGQUFZQSxDQUFDc0csSUFBSSxDQUN0QjtZQUNFRixTQUFTO1lBQ1RMLE9BQU87WUFDUFEsU0FBUztZQUNUcUUsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DLEdBQ0E7WUFBRXRFLFFBQVE7UUFBSTtJQUVsQjtJQUVBLE9BQU87UUFBRW1CO0lBQU87QUFDbEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wbGFubmV0aWMtcGxhdGZvcm0vLi9zcmMvbGliL2F1dGgvYXBpQXV0aC50cz81ZDAzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFQSSBBdXRoZW50aWNhdGlvbiBIZWxwZXJcbi8vIFByb3ZpZGVzIGNvbnNpc3RlbnQgYXV0aCBjaGVja2luZyBhY3Jvc3MgYWxsIEFQSSByb3V0ZXNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2Uvc2VydmVyJ1xuaW1wb3J0IHR5cGUgeyBVc2VyIH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IGFzIGNyZWF0ZVN1cGFiYXNlSnNDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aENvbnRleHQge1xuICB1c2VyOiBVc2VyXG4gIHVzZXJJZDogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgcm9sZTogc3RyaW5nIHwgbnVsbFxuICBmaXJtSWQ6IHN0cmluZyB8IG51bGxcbiAgYWR2aXNvcklkOiBzdHJpbmcgfCBudWxsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW5cbiAgY29udGV4dD86IEF1dGhDb250ZXh0XG4gIGVycm9yPzogc3RyaW5nXG4gIHJlc3BvbnNlPzogTmV4dFJlc3BvbnNlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aE9wdGlvbnMge1xuICByZXF1aXJlQXV0aD86IGJvb2xlYW5cbiAgcmVxdWlyZVJvbGU/OiBzdHJpbmdbXVxuICBhbGxvd1B1YmxpYz86IGJvb2xlYW5cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVVUSCBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRGaXJtSWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IGVudkRlZmF1bHRGaXJtSWQgPSBwcm9jZXNzLmVudi5ERUZBVUxUX0ZJUk1fSUQgPz8gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVGQVVMVF9GSVJNX0lEXG4gIHJldHVybiB0eXBlb2YgZW52RGVmYXVsdEZpcm1JZCA9PT0gJ3N0cmluZycgJiYgZW52RGVmYXVsdEZpcm1JZC50cmltKCkgPyBlbnZEZWZhdWx0RmlybUlkLnRyaW0oKSA6IG51bGxcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplT3B0aW9uYWxTdHJpbmcodmFsdWU6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiBudWxsXG4gIGNvbnN0IHRyaW1tZWQgPSB2YWx1ZS50cmltKClcbiAgcmV0dXJuIHRyaW1tZWQgPyB0cmltbWVkIDogbnVsbFxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVGaXJtSWQodmFsdWU6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgdHJpbW1lZCA9IG5vcm1hbGl6ZU9wdGlvbmFsU3RyaW5nKHZhbHVlKVxuICBpZiAoIXRyaW1tZWQpIHJldHVybiBudWxsXG4gIC8vIEF2b2lkIGxlZ2FjeSBwbGFjZWhvbGRlciB2YWx1ZXMgbGVha2luZyBpbnRvIGZpcm0tc2NvcGVkIHF1ZXJpZXMuXG4gIGlmICh0cmltbWVkID09PSAnZGVmYXVsdC1maXJtJykgcmV0dXJuIG51bGxcbiAgcmV0dXJuIHRyaW1tZWRcbn1cblxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0VXJsKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiYXNlNjQgPSB2YWx1ZS5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpXG4gICAgY29uc3QgcGFkZGVkID0gYmFzZTY0ICsgJz0nLnJlcGVhdCgoNCAtIChiYXNlNjQubGVuZ3RoICUgNCkpICUgNClcblxuICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHBhZGRlZCwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCd1dGY4JylcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIChnbG9iYWxUaGlzIGFzIGFueSkuYXRvYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIChnbG9iYWxUaGlzIGFzIGFueSkuYXRvYihwYWRkZWQpXG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICAvLyBpZ25vcmVcbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG5mdW5jdGlvbiBleHRyYWN0QWNjZXNzVG9rZW5Gcm9tU2Vzc2lvblBheWxvYWQocGF5bG9hZDogdW5rbm93bik6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIXBheWxvYWQgfHwgdHlwZW9mIHBheWxvYWQgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbFxuICBjb25zdCBvYmogPSBwYXlsb2FkIGFzIGFueVxuXG4gIGNvbnN0IGRpcmVjdCA9IG5vcm1hbGl6ZU9wdGlvbmFsU3RyaW5nKG9iai5hY2Nlc3NfdG9rZW4pXG4gIGlmIChkaXJlY3QpIHJldHVybiBkaXJlY3RcblxuICBjb25zdCBjdXJyZW50ID0gbm9ybWFsaXplT3B0aW9uYWxTdHJpbmcob2JqLmN1cnJlbnRTZXNzaW9uPy5hY2Nlc3NfdG9rZW4pXG4gIGlmIChjdXJyZW50KSByZXR1cm4gY3VycmVudFxuXG4gIGNvbnN0IG5lc3RlZCA9IG5vcm1hbGl6ZU9wdGlvbmFsU3RyaW5nKG9iai5kYXRhPy5zZXNzaW9uPy5hY2Nlc3NfdG9rZW4pXG4gIGlmIChuZXN0ZWQpIHJldHVybiBuZXN0ZWRcblxuICByZXR1cm4gbnVsbFxufVxuXG5mdW5jdGlvbiBnZXRTdXBhYmFzZVByb2plY3RSZWZGcm9tRW52KCk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkxcbiAgaWYgKCF1cmwpIHJldHVybiBudWxsXG4gIHRyeSB7XG4gICAgY29uc3QgaG9zdG5hbWUgPSBuZXcgVVJMKHVybCkuaG9zdG5hbWVcbiAgICBjb25zdCByZWYgPSBob3N0bmFtZS5zcGxpdCgnLicpWzBdXG4gICAgcmV0dXJuIHJlZiA/IHJlZiA6IG51bGxcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZUNvb2tpZUhlYWRlcihjb29raWVIZWFkZXI6IHN0cmluZyB8IG51bGwpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgaWYgKCFjb29raWVIZWFkZXIpIHJldHVybiB7fVxuICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxuICBjb25zdCBwYXJ0cyA9IGNvb2tpZUhlYWRlci5zcGxpdCgnOycpXG4gIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgIGNvbnN0IFtyYXdOYW1lLCAuLi5yZXN0XSA9IHBhcnQudHJpbSgpLnNwbGl0KCc9JylcbiAgICBjb25zdCBuYW1lID0gcmF3TmFtZT8udHJpbSgpXG4gICAgaWYgKCFuYW1lKSBjb250aW51ZVxuICAgIGNvbnN0IHZhbHVlID0gcmVzdC5qb2luKCc9JylcbiAgICByZXN1bHRbbmFtZV0gPSB2YWx1ZVxuICB9XG4gIHJldHVybiByZXN1bHRcbn1cblxuZnVuY3Rpb24gcmVhZENodW5rZWRDb29raWUoY29va2llczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwga2V5OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKGNvb2tpZXNba2V5XSkgcmV0dXJuIGNvb2tpZXNba2V5XVxuXG4gIGNvbnN0IGNodW5rczogQXJyYXk8eyBpZHg6IG51bWJlcjsgdmFsdWU6IHN0cmluZyB9PiA9IFtdXG4gIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb29raWVzKSkge1xuICAgIGlmICghbmFtZS5zdGFydHNXaXRoKGAke2tleX0uYCkpIGNvbnRpbnVlXG4gICAgY29uc3Qgc3VmZml4ID0gbmFtZS5zbGljZShrZXkubGVuZ3RoICsgMSlcbiAgICBjb25zdCBpZHggPSBOdW1iZXIucGFyc2VJbnQoc3VmZml4LCAxMClcbiAgICBpZiAoTnVtYmVyLmlzTmFOKGlkeCkpIGNvbnRpbnVlXG4gICAgY2h1bmtzLnB1c2goeyBpZHgsIHZhbHVlIH0pXG4gIH1cblxuICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgY2h1bmtzLnNvcnQoKGEsIGIpID0+IGEuaWR4IC0gYi5pZHgpXG4gIHJldHVybiBjaHVua3MubWFwKChjKSA9PiBjLnZhbHVlKS5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBleHRyYWN0QWNjZXNzVG9rZW5Gcm9tU3VwYWJhc2VDb29raWUocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgY29va2llSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnY29va2llJylcbiAgaWYgKCFjb29raWVIZWFkZXIpIHJldHVybiBudWxsXG5cbiAgY29uc3QgY29va2llcyA9IHBhcnNlQ29va2llSGVhZGVyKGNvb2tpZUhlYWRlcilcbiAgY29uc3QgcmVmID0gZ2V0U3VwYWJhc2VQcm9qZWN0UmVmRnJvbUVudigpXG4gIGNvbnN0IHByaW1hcnlLZXkgPSByZWYgPyBgc2ItJHtyZWZ9LWF1dGgtdG9rZW5gIDogbnVsbFxuXG4gIGNvbnN0IGNhbmRpZGF0ZUtleXM6IHN0cmluZ1tdID0gW11cbiAgaWYgKHByaW1hcnlLZXkpIGNhbmRpZGF0ZUtleXMucHVzaChwcmltYXJ5S2V5KVxuICBmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMoY29va2llcykpIHtcbiAgICBpZiAoIW5hbWUuc3RhcnRzV2l0aCgnc2ItJykpIGNvbnRpbnVlXG4gICAgaWYgKCFuYW1lLmluY2x1ZGVzKCdhdXRoLXRva2VuJykpIGNvbnRpbnVlXG4gICAgLy8gVXNlIHRoZSBiYXNlIGtleSAod2l0aG91dCAuMC8uMS4uLikgc28gd2UgY2FuIHJlYXNzZW1ibGUgY2h1bmtzLlxuICAgIGNvbnN0IGJhc2UgPSBuYW1lLnNwbGl0KCcuJylbMF1cbiAgICBpZiAoIWNhbmRpZGF0ZUtleXMuaW5jbHVkZXMoYmFzZSkpIGNhbmRpZGF0ZUtleXMucHVzaChiYXNlKVxuICB9XG5cbiAgZm9yIChjb25zdCBrZXkgb2YgY2FuZGlkYXRlS2V5cykge1xuICAgIGNvbnN0IHJhdyA9IHJlYWRDaHVua2VkQ29va2llKGNvb2tpZXMsIGtleSlcbiAgICBpZiAoIXJhdykgY29udGludWVcblxuICAgIC8vIHN1cGFiYXNlL3NzciBwcmVmaXhlcyBiYXNlNjR1cmwtZW5jb2RlZCBjb29raWUgdmFsdWVzIHdpdGggXCJiYXNlNjQtXCIuXG4gICAgY29uc3QgZGVjb2RlZFZhbHVlID0gcmF3LnN0YXJ0c1dpdGgoJ2Jhc2U2NC0nKSA/IGRlY29kZUJhc2U2NFVybChyYXcuc2xpY2UoJ2Jhc2U2NC0nLmxlbmd0aCkpIDogcmF3XG4gICAgaWYgKCFkZWNvZGVkVmFsdWUpIGNvbnRpbnVlXG5cbiAgICBjb25zdCBwYXJzZWQgPSAoKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlZFZhbHVlKSBhcyB1bmtub3duXG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICB9KSgpXG4gICAgY29uc3QgdG9rZW4gPSBleHRyYWN0QWNjZXNzVG9rZW5Gcm9tU2Vzc2lvblBheWxvYWQocGFyc2VkKVxuICAgIGlmICh0b2tlbikgcmV0dXJuIHRva2VuXG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIEdldCBhdXRoZW50aWNhdGVkIHVzZXIgY29udGV4dCBmb3IgQVBJIHJvdXRlc1xuICogUmV0dXJucyB1c2VyIGluZm8gYW5kIHJlbGF0ZWQgY29udGV4dCAoZmlybSwgYWR2aXNvciwgZXRjLilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF1dGhDb250ZXh0KHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTxBdXRoUmVzdWx0PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKSA/PyByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdBdXRob3JpemF0aW9uJylcbiAgICBjb25zdCBiZWFyZXJUb2tlbiA9IGF1dGhIZWFkZXI/LnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSA/IGF1dGhIZWFkZXIuc2xpY2UoJ0JlYXJlciAnLmxlbmd0aCkudHJpbSgpIDogbnVsbFxuICAgIGNvbnN0IGNvb2tpZUFjY2Vzc1Rva2VuID0gZXh0cmFjdEFjY2Vzc1Rva2VuRnJvbVN1cGFiYXNlQ29va2llKHJlcXVlc3QpXG5cbiAgICAvLyBQcmVmZXIgY29va2llLWJhc2VkIGF1dGggKGJlc3QgZm9yIFNTUiksIGJ1dCBhbGxvdyBhIEJlYXJlciB0b2tlbiBmYWxsYmFja1xuICAgIC8vIHRvIHN1cHBvcnQgY2xpZW50cyB0aGF0IHN0b3JlIHNlc3Npb25zIG91dHNpZGUgY29va2llcy5cbiAgICBsZXQgc3VwYWJhc2U6IGFueSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpXG4gICAgbGV0IHVzZXI6IFVzZXIgfCBudWxsID0gbnVsbFxuICAgIGxldCBhdXRoRXJyb3I6IGFueSA9IG51bGxcblxuICAgIGNvbnN0IGNvb2tpZVJlc3VsdCA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG4gICAgdXNlciA9IGNvb2tpZVJlc3VsdC5kYXRhLnVzZXJcbiAgICBhdXRoRXJyb3IgPSBjb29raWVSZXN1bHQuZXJyb3JcblxuICAgIGNvbnN0IHRva2VuQ2FuZGlkYXRlcyA9IFtiZWFyZXJUb2tlbiwgY29va2llQWNjZXNzVG9rZW5dLmZpbHRlcihcbiAgICAgICh2YWx1ZSk6IHZhbHVlIGlzIHN0cmluZyA9PiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKS5sZW5ndGggPiAwXG4gICAgKVxuXG4gICAgaWYgKCghdXNlciB8fCBhdXRoRXJyb3IpICYmIHRva2VuQ2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkxcbiAgICAgIGNvbnN0IGFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxuICAgICAgaWYgKCF1cmwgfHwgIWFub25LZXkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgcmVzcG9uc2U6IE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIGVycm9yJywgbWVzc2FnZTogJ1N1cGFiYXNlIGNyZWRlbnRpYWxzIGFyZSBub3QgY29uZmlndXJlZCcgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2VuQ2FuZGlkYXRlcykge1xuICAgICAgICBjb25zdCB0b2tlbkNsaWVudCA9IGNyZWF0ZVN1cGFiYXNlSnNDbGllbnQodXJsLCBhbm9uS2V5LCB7XG4gICAgICAgICAgZ2xvYmFsOiB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICAgICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgICAgICAgZGV0ZWN0U2Vzc2lvbkluVXJsOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IHRva2VuUmVzdWx0ID0gYXdhaXQgdG9rZW5DbGllbnQuYXV0aC5nZXRVc2VyKHRva2VuKVxuICAgICAgICB1c2VyID0gdG9rZW5SZXN1bHQuZGF0YS51c2VyXG4gICAgICAgIGF1dGhFcnJvciA9IHRva2VuUmVzdWx0LmVycm9yXG5cbiAgICAgICAgLy8gUmVwb2ludCBzdXBhYmFzZSBjbGllbnQgdG8gb25lIHRoYXQgd2lsbCBpbmNsdWRlIHRoZSB0b2tlbiBmb3IgREIgcmVhZHMuXG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgc3VwYWJhc2UgPSB0b2tlbkNsaWVudFxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYXV0aEVycm9yIHx8ICF1c2VyKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdVbmF1dGhvcml6ZWQgLSBQbGVhc2UgbG9nIGluJyxcbiAgICAgICAgcmVzcG9uc2U6IE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnLCBtZXNzYWdlOiAnUGxlYXNlIGxvZyBpbiB0byBhY2Nlc3MgdGhpcyByZXNvdXJjZScgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCB1c2VyIHByb2ZpbGUgd2l0aCByb2xlIGFuZCBmaXJtIGluZm9cbiAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUgfSA9IGF3YWl0IChzdXBhYmFzZSBhcyBhbnkpXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgLnNlbGVjdCgncm9sZSwgZmlybV9pZCwgYWR2aXNvcl9pZCcpXG4gICAgICAuZXEoJ2lkJywgdXNlci5pZClcbiAgICAgIC5zaW5nbGUoKVxuXG4gICAgY29uc3QgbWV0YWRhdGEgPSAodXNlci51c2VyX21ldGFkYXRhID8/IHt9KSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICAgIGNvbnN0IG1ldGFkYXRhUm9sZSA9IChtZXRhZGF0YS5yb2xlIGFzIHN0cmluZyB8IHVuZGVmaW5lZCkgPz8gbnVsbFxuICAgIGNvbnN0IG1ldGFkYXRhRmlybUlkID1cbiAgICAgIChtZXRhZGF0YS5maXJtX2lkIGFzIHN0cmluZyB8IHVuZGVmaW5lZCkgPz9cbiAgICAgIChtZXRhZGF0YS5maXJtSWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkKSA/P1xuICAgICAgbnVsbFxuICAgIGNvbnN0IG1ldGFkYXRhQWR2aXNvcklkID1cbiAgICAgIChtZXRhZGF0YS5hZHZpc29yX2lkIGFzIHN0cmluZyB8IHVuZGVmaW5lZCkgPz9cbiAgICAgIChtZXRhZGF0YS5hZHZpc29ySWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkKSA/P1xuICAgICAgbnVsbFxuXG4gICAgY29uc3QgZGVmYXVsdEZpcm1JZCA9IGdldERlZmF1bHRGaXJtSWQoKVxuICAgIGNvbnN0IGZpcm1JZCA9XG4gICAgICBub3JtYWxpemVGaXJtSWQocHJvZmlsZT8uZmlybV9pZCkgPz9cbiAgICAgIG5vcm1hbGl6ZUZpcm1JZChtZXRhZGF0YUZpcm1JZCkgPz9cbiAgICAgIG5vcm1hbGl6ZUZpcm1JZChkZWZhdWx0RmlybUlkKVxuXG4gICAgY29uc3QgY29udGV4dDogQXV0aENvbnRleHQgPSB7XG4gICAgICB1c2VyLFxuICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICByb2xlOiBub3JtYWxpemVPcHRpb25hbFN0cmluZyhwcm9maWxlPy5yb2xlKSB8fCBub3JtYWxpemVPcHRpb25hbFN0cmluZyhtZXRhZGF0YVJvbGUpLFxuICAgICAgZmlybUlkLFxuICAgICAgYWR2aXNvcklkOiBub3JtYWxpemVPcHRpb25hbFN0cmluZyhwcm9maWxlPy5hZHZpc29yX2lkKSB8fCBub3JtYWxpemVPcHRpb25hbFN0cmluZyhtZXRhZGF0YUFkdmlzb3JJZCkgfHwgdXNlci5pZFxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgY29udGV4dFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbQXV0aF0gRXJyb3IgZ2V0dGluZyBhdXRoIGNvbnRleHQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnLFxuICAgICAgcmVzcG9uc2U6IE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQXV0aGVudGljYXRpb24gZXJyb3InLCBtZXNzYWdlOiAnRmFpbGVkIHRvIHZlcmlmeSBhdXRoZW50aWNhdGlvbicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGUgYXV0aCB3aXRoIHNwZWNpZmljIHJlcXVpcmVtZW50c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVBdXRoKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgb3B0aW9uczogQXV0aE9wdGlvbnMgPSB7fVxuKTogUHJvbWlzZTxBdXRoUmVzdWx0PiB7XG4gIGNvbnN0IHsgcmVxdWlyZUF1dGggPSB0cnVlLCByZXF1aXJlUm9sZSwgYWxsb3dQdWJsaWMgPSBmYWxzZSB9ID0gb3B0aW9uc1xuXG4gIC8vIEFsbG93IHB1YmxpYyBhY2Nlc3MgaWYgc3BlY2lmaWVkXG4gIGlmIChhbGxvd1B1YmxpYykge1xuICAgIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCBnZXRBdXRoQ29udGV4dChyZXF1ZXN0KVxuICAgIHJldHVybiBhdXRoUmVzdWx0LnN1Y2Nlc3MgPyBhdXRoUmVzdWx0IDogeyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIC8vIENoZWNrIGF1dGhlbnRpY2F0aW9uXG4gIGlmICghcmVxdWlyZUF1dGgpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH1cbiAgfVxuXG4gIGNvbnN0IGF1dGhSZXN1bHQgPSBhd2FpdCBnZXRBdXRoQ29udGV4dChyZXF1ZXN0KVxuXG4gIGlmICghYXV0aFJlc3VsdC5zdWNjZXNzKSB7XG4gICAgcmV0dXJuIGF1dGhSZXN1bHRcbiAgfVxuXG4gIC8vIENoZWNrIHJvbGUgcmVxdWlyZW1lbnRzXG4gIGlmIChyZXF1aXJlUm9sZSAmJiByZXF1aXJlUm9sZS5sZW5ndGggPiAwICYmIGF1dGhSZXN1bHQuY29udGV4dCkge1xuICAgIGNvbnN0IHVzZXJSb2xlID0gYXV0aFJlc3VsdC5jb250ZXh0LnJvbGVcbiAgICBpZiAoIXVzZXJSb2xlIHx8ICFyZXF1aXJlUm9sZS5pbmNsdWRlcyh1c2VyUm9sZSkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0luc3VmZmljaWVudCBwZXJtaXNzaW9ucycsXG4gICAgICAgIHJlc3BvbnNlOiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlcnJvcjogJ0ZvcmJpZGRlbicsXG4gICAgICAgICAgICBtZXNzYWdlOiAnWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoaXMgcmVzb3VyY2UnLFxuICAgICAgICAgICAgcmVxdWlyZWRSb2xlczogcmVxdWlyZVJvbGVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDMgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGF1dGhSZXN1bHRcbn1cblxuLyoqXG4gKiBIaWdoZXItb3JkZXIgZnVuY3Rpb24gdG8gd3JhcCBBUEkgaGFuZGxlcnMgd2l0aCBhdXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoQXV0aDxUIGV4dGVuZHMgYW55W10+KFxuICBoYW5kbGVyOiAocmVxdWVzdDogTmV4dFJlcXVlc3QsIGNvbnRleHQ6IEF1dGhDb250ZXh0LCAuLi5hcmdzOiBUKSA9PiBQcm9taXNlPE5leHRSZXNwb25zZT4sXG4gIG9wdGlvbnM6IEF1dGhPcHRpb25zID0ge31cbikge1xuICByZXR1cm4gYXN5bmMgKHJlcXVlc3Q6IE5leHRSZXF1ZXN0LCAuLi5hcmdzOiBUKTogUHJvbWlzZTxOZXh0UmVzcG9uc2U+ID0+IHtcbiAgICBjb25zdCBhdXRoUmVzdWx0ID0gYXdhaXQgdmFsaWRhdGVBdXRoKHJlcXVlc3QsIG9wdGlvbnMpXG5cbiAgICBpZiAoIWF1dGhSZXN1bHQuc3VjY2VzcyB8fCBhdXRoUmVzdWx0LnJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gYXV0aFJlc3VsdC5yZXNwb25zZSB8fCBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBJZiBhdXRoIGlzIG9wdGlvbmFsIGFuZCBubyBjb250ZXh0LCBwcm92aWRlIGVtcHR5IGNvbnRleHRcbiAgICBjb25zdCBjb250ZXh0ID0gYXV0aFJlc3VsdC5jb250ZXh0IHx8IHtcbiAgICAgIHVzZXI6IG51bGwgYXMgYW55LFxuICAgICAgdXNlcklkOiAnJyxcbiAgICAgIGVtYWlsOiB1bmRlZmluZWQsXG4gICAgICByb2xlOiBudWxsLFxuICAgICAgZmlybUlkOiBudWxsLFxuICAgICAgYWR2aXNvcklkOiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxdWVzdCwgY29udGV4dCwgLi4uYXJncylcbiAgfVxufVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBhZHZpc29yJ3MgcHJvZmlsZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWR2aXNvclByb2ZpbGUodXNlcklkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGNyZWF0ZUNsaWVudCgpXG5cbiAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAgIC5zZWxlY3QoYFxuICAgICAgICBpZCxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIGZ1bGxfbmFtZSxcbiAgICAgICAgcm9sZSxcbiAgICAgICAgZmlybV9pZCxcbiAgICAgICAgYWR2aXNvcl9pZCxcbiAgICAgICAgcGhvbmUsXG4gICAgICAgIGF2YXRhcl91cmwsXG4gICAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICAgIHVwZGF0ZWRfYXRcbiAgICAgIGApXG4gICAgICAuZXEoJ2lkJywgdXNlcklkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBFcnJvciBmZXRjaGluZyBhZHZpc29yIHByb2ZpbGU6JywgZXJyb3IpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiBwcm9maWxlXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0F1dGhdIEVycm9yIGluIGdldEFkdmlzb3JQcm9maWxlOicsIGVycm9yKVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgZmlybSBkZXRhaWxzIGZvciB0aGUgY3VycmVudCB1c2VyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaXJtRGV0YWlscyhmaXJtSWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgY3JlYXRlQ2xpZW50KClcblxuICAgIGNvbnN0IHsgZGF0YTogZmlybSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnZmlybXMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2lkJywgZmlybUlkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBdXRoXSBFcnJvciBmZXRjaGluZyBmaXJtIGRldGFpbHM6JywgZXJyb3IpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIHJldHVybiBmaXJtXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0F1dGhdIEVycm9yIGluIGdldEZpcm1EZXRhaWxzOicsIGVycm9yKVxuICAgIHJldHVybiBudWxsXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUk9MRSBDT05TVEFOVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IFJPTEVTID0ge1xuICBBRE1JTjogJ2FkbWluJyxcbiAgQURWSVNPUjogJ2Fkdmlzb3InLFxuICBDT01QTElBTkNFOiAnY29tcGxpYW5jZScsXG4gIFNVUFBPUlQ6ICdzdXBwb3J0JyxcbiAgQ0xJRU5UOiAnY2xpZW50J1xufSBhcyBjb25zdFxuXG5leHBvcnQgdHlwZSBSb2xlID0gdHlwZW9mIFJPTEVTW2tleW9mIHR5cGVvZiBST0xFU11cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUEVSTUlTU0lPTiBIRUxQRVJTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5BY2Nlc3NDbGllbnQoYXV0aENvbnRleHQ6IEF1dGhDb250ZXh0LCBjbGllbnRBZHZpc29ySWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBBZG1pbnMgY2FuIGFjY2VzcyBhbGwgY2xpZW50c1xuICBpZiAoYXV0aENvbnRleHQucm9sZSA9PT0gUk9MRVMuQURNSU4pIHJldHVybiB0cnVlXG5cbiAgLy8gQWR2aXNvcnMgY2FuIG9ubHkgYWNjZXNzIHRoZWlyIG93biBjbGllbnRzXG4gIHJldHVybiBhdXRoQ29udGV4dC5hZHZpc29ySWQgPT09IGNsaWVudEFkdmlzb3JJZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuTW9kaWZ5RG9jdW1lbnQoYXV0aENvbnRleHQ6IEF1dGhDb250ZXh0LCBkb2N1bWVudEFkdmlzb3JJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmIChhdXRoQ29udGV4dC5yb2xlID09PSBST0xFUy5BRE1JTikgcmV0dXJuIHRydWVcbiAgaWYgKGF1dGhDb250ZXh0LnJvbGUgPT09IFJPTEVTLkNPTVBMSUFOQ0UpIHJldHVybiB0cnVlXG4gIHJldHVybiBhdXRoQ29udGV4dC5hZHZpc29ySWQgPT09IGRvY3VtZW50QWR2aXNvcklkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0FkbWluKGF1dGhDb250ZXh0OiBBdXRoQ29udGV4dCk6IGJvb2xlYW4ge1xuICByZXR1cm4gYXV0aENvbnRleHQucm9sZSA9PT0gUk9MRVMuQURNSU5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQWR2aXNvcihhdXRoQ29udGV4dDogQXV0aENvbnRleHQpOiBib29sZWFuIHtcbiAgcmV0dXJuIGF1dGhDb250ZXh0LnJvbGUgPT09IFJPTEVTLkFEVklTT1IgfHwgYXV0aENvbnRleHQucm9sZSA9PT0gUk9MRVMuQURNSU5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ29tcGxpYW5jZShhdXRoQ29udGV4dDogQXV0aENvbnRleHQpOiBib29sZWFuIHtcbiAgcmV0dXJuIGF1dGhDb250ZXh0LnJvbGUgPT09IFJPTEVTLkNPTVBMSUFOQ0UgfHwgYXV0aENvbnRleHQucm9sZSA9PT0gUk9MRVMuQURNSU5cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUkJBQyBQRVJNSVNTSU9OIE1BVFJJWFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFBlcm1pc3Npb24gdHlwZXMgZm9yIFJCQUNcbiAqL1xuZXhwb3J0IHR5cGUgUGVybWlzc2lvbiA9XG4gIHwgJ2NsaWVudHM6cmVhZCdcbiAgfCAnY2xpZW50czp3cml0ZSdcbiAgfCAnY2xpZW50czpkZWxldGUnXG4gIHwgJ2Fzc2Vzc21lbnRzOnJlYWQnXG4gIHwgJ2Fzc2Vzc21lbnRzOndyaXRlJ1xuICB8ICdhc3Nlc3NtZW50czpkZWxldGUnXG4gIHwgJ2RvY3VtZW50czpyZWFkJ1xuICB8ICdkb2N1bWVudHM6d3JpdGUnXG4gIHwgJ2RvY3VtZW50czpkZWxldGUnXG4gIHwgJ2RvY3VtZW50czpzaWduJ1xuICB8ICdyZXBvcnRzOnJlYWQnXG4gIHwgJ3JlcG9ydHM6Z2VuZXJhdGUnXG4gIHwgJ2FkbWluOnVzZXJzJ1xuICB8ICdhZG1pbjpzZXR0aW5ncydcbiAgfCAnYWRtaW46YXVkaXQnXG5cbi8qKlxuICogUm9sZS1iYXNlZCBwZXJtaXNzaW9uIG1hdHJpeFxuICovXG5jb25zdCBST0xFX1BFUk1JU1NJT05TOiBSZWNvcmQ8Um9sZSwgUGVybWlzc2lvbltdPiA9IHtcbiAgYWRtaW46IFtcbiAgICAnY2xpZW50czpyZWFkJywgJ2NsaWVudHM6d3JpdGUnLCAnY2xpZW50czpkZWxldGUnLFxuICAgICdhc3Nlc3NtZW50czpyZWFkJywgJ2Fzc2Vzc21lbnRzOndyaXRlJywgJ2Fzc2Vzc21lbnRzOmRlbGV0ZScsXG4gICAgJ2RvY3VtZW50czpyZWFkJywgJ2RvY3VtZW50czp3cml0ZScsICdkb2N1bWVudHM6ZGVsZXRlJywgJ2RvY3VtZW50czpzaWduJyxcbiAgICAncmVwb3J0czpyZWFkJywgJ3JlcG9ydHM6Z2VuZXJhdGUnLFxuICAgICdhZG1pbjp1c2VycycsICdhZG1pbjpzZXR0aW5ncycsICdhZG1pbjphdWRpdCdcbiAgXSxcbiAgYWR2aXNvcjogW1xuICAgICdjbGllbnRzOnJlYWQnLCAnY2xpZW50czp3cml0ZScsXG4gICAgJ2Fzc2Vzc21lbnRzOnJlYWQnLCAnYXNzZXNzbWVudHM6d3JpdGUnLFxuICAgICdkb2N1bWVudHM6cmVhZCcsICdkb2N1bWVudHM6d3JpdGUnLCAnZG9jdW1lbnRzOnNpZ24nLFxuICAgICdyZXBvcnRzOnJlYWQnLCAncmVwb3J0czpnZW5lcmF0ZSdcbiAgXSxcbiAgY29tcGxpYW5jZTogW1xuICAgICdjbGllbnRzOnJlYWQnLFxuICAgICdhc3Nlc3NtZW50czpyZWFkJyxcbiAgICAnZG9jdW1lbnRzOnJlYWQnLCAnZG9jdW1lbnRzOndyaXRlJyxcbiAgICAncmVwb3J0czpyZWFkJywgJ3JlcG9ydHM6Z2VuZXJhdGUnLFxuICAgICdhZG1pbjphdWRpdCdcbiAgXSxcbiAgc3VwcG9ydDogW1xuICAgICdjbGllbnRzOnJlYWQnLFxuICAgICdhc3Nlc3NtZW50czpyZWFkJyxcbiAgICAnZG9jdW1lbnRzOnJlYWQnLFxuICAgICdyZXBvcnRzOnJlYWQnXG4gIF0sXG4gIGNsaWVudDogW1xuICAgICdhc3Nlc3NtZW50czpyZWFkJyxcbiAgICAnZG9jdW1lbnRzOnJlYWQnLCAnZG9jdW1lbnRzOnNpZ24nXG4gIF1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHJvbGUgaGFzIGEgc3BlY2lmaWMgcGVybWlzc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzUGVybWlzc2lvbihyb2xlOiBSb2xlIHwgc3RyaW5nIHwgbnVsbCwgcGVybWlzc2lvbjogUGVybWlzc2lvbik6IGJvb2xlYW4ge1xuICBpZiAoIXJvbGUpIHJldHVybiBmYWxzZVxuICBjb25zdCBwZXJtaXNzaW9ucyA9IFJPTEVfUEVSTUlTU0lPTlNbcm9sZSBhcyBSb2xlXVxuICByZXR1cm4gcGVybWlzc2lvbnM/LmluY2x1ZGVzKHBlcm1pc3Npb24pID8/IGZhbHNlXG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYXV0aCBjb250ZXh0IGhhcyBhIHNwZWNpZmljIHBlcm1pc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUGVybWlzc2lvbihhdXRoQ29udGV4dDogQXV0aENvbnRleHQsIHBlcm1pc3Npb246IFBlcm1pc3Npb24pOiBib29sZWFuIHtcbiAgcmV0dXJuIGhhc1Blcm1pc3Npb24oYXV0aENvbnRleHQucm9sZSwgcGVybWlzc2lvbilcbn1cblxuLyoqXG4gKiBSZXF1aXJlIHNwZWNpZmljIHBlcm1pc3Npb24sIHJldHVybnMgZXJyb3IgcmVzcG9uc2UgaWYgbm90IGF1dGhvcml6ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVQZXJtaXNzaW9uKFxuICBhdXRoQ29udGV4dDogQXV0aENvbnRleHQsXG4gIHBlcm1pc3Npb246IFBlcm1pc3Npb25cbik6IE5leHRSZXNwb25zZSB8IG51bGwge1xuICBpZiAoIWNoZWNrUGVybWlzc2lvbihhdXRoQ29udGV4dCwgcGVybWlzc2lvbikpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ZvcmJpZGRlbicsXG4gICAgICAgIG1lc3NhZ2U6IGBNaXNzaW5nIHJlcXVpcmVkIHBlcm1pc3Npb246ICR7cGVybWlzc2lvbn1gLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDMgfVxuICAgIClcbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBGSVJNIElEIFZBTElEQVRJT04gKE5PIEhBUkRDT0RFRCBGQUxMQkFDS1MpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IGZpcm0gSUQgZnJvbSBhdXRoIGNvbnRleHQgd2l0aCB2YWxpZGF0aW9uXG4gKiBJTVBPUlRBTlQ6IERvZXMgTk9UIHVzZSBoYXJkY29kZWQgZmFsbGJhY2tzIGZvciBzZWN1cml0eVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsaWRhdGVkRmlybUlkKGF1dGhDb250ZXh0OiBBdXRoQ29udGV4dCk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCBmaXJtSWQgPSBhdXRoQ29udGV4dC5maXJtSWRcblxuICAvLyBWYWxpZGF0ZSBVVUlEIGZvcm1hdFxuICBpZiAoIWZpcm1JZCkgcmV0dXJuIG51bGxcblxuICBjb25zdCB1dWlkUmVnZXggPSAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9JC9pXG4gIGlmICghdXVpZFJlZ2V4LnRlc3QoZmlybUlkKSkge1xuICAgIGNvbnNvbGUud2FybignW0F1dGhdIEludmFsaWQgZmlybSBJRCBmb3JtYXQ6JywgZmlybUlkKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBSZWplY3Qga25vd24gdGVzdC9wbGFjZWhvbGRlciBVVUlEc1xuICBjb25zdCBpbnZhbGlkSWRzID0gW1xuICAgICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAnLFxuICAgICcwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDEnLFxuICAgICcxMjM0NTY3OC0xMjM0LTEyMzQtMTIzNC0xMjM0NTY3ODkwMTInXG4gIF1cblxuICBpZiAoaW52YWxpZElkcy5pbmNsdWRlcyhmaXJtSWQpKSB7XG4gICAgY29uc29sZS53YXJuKCdbQXV0aF0gUmVqZWN0ZWQgcGxhY2Vob2xkZXIgZmlybSBJRDonLCBmaXJtSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHJldHVybiBmaXJtSWRcbn1cblxuLyoqXG4gKiBSZXF1aXJlIGZpcm0gSUQsIHJldHVybnMgZXJyb3IgcmVzcG9uc2UgaWYgbWlzc2luZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZUZpcm1JZChhdXRoQ29udGV4dDogQXV0aENvbnRleHQpOiB7IGZpcm1JZDogc3RyaW5nIH0gfCBOZXh0UmVzcG9uc2Uge1xuICBjb25zdCBmaXJtSWQgPSBnZXRWYWxpZGF0ZWRGaXJtSWQoYXV0aENvbnRleHQpXG5cbiAgaWYgKCFmaXJtSWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0Zpcm0gSUQgcmVxdWlyZWQnLFxuICAgICAgICBtZXNzYWdlOiAnWW91ciBhY2NvdW50IGlzIG5vdCBhc3NvY2lhdGVkIHdpdGggYSBmaXJtLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LicsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHsgZmlybUlkIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVDbGllbnQiLCJjcmVhdGVTdXBhYmFzZUpzQ2xpZW50IiwiZ2V0RGVmYXVsdEZpcm1JZCIsImVudkRlZmF1bHRGaXJtSWQiLCJwcm9jZXNzIiwiZW52IiwiREVGQVVMVF9GSVJNX0lEIiwiTkVYVF9QVUJMSUNfREVGQVVMVF9GSVJNX0lEIiwidHJpbSIsIm5vcm1hbGl6ZU9wdGlvbmFsU3RyaW5nIiwidmFsdWUiLCJ0cmltbWVkIiwibm9ybWFsaXplRmlybUlkIiwiZGVjb2RlQmFzZTY0VXJsIiwiYmFzZTY0IiwicmVwbGFjZSIsInBhZGRlZCIsInJlcGVhdCIsImxlbmd0aCIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsImdsb2JhbFRoaXMiLCJhdG9iIiwiZXh0cmFjdEFjY2Vzc1Rva2VuRnJvbVNlc3Npb25QYXlsb2FkIiwicGF5bG9hZCIsIm9iaiIsImRpcmVjdCIsImFjY2Vzc190b2tlbiIsImN1cnJlbnQiLCJjdXJyZW50U2Vzc2lvbiIsIm5lc3RlZCIsImRhdGEiLCJzZXNzaW9uIiwiZ2V0U3VwYWJhc2VQcm9qZWN0UmVmRnJvbUVudiIsInVybCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsImhvc3RuYW1lIiwiVVJMIiwicmVmIiwic3BsaXQiLCJwYXJzZUNvb2tpZUhlYWRlciIsImNvb2tpZUhlYWRlciIsInJlc3VsdCIsInBhcnRzIiwicGFydCIsInJhd05hbWUiLCJyZXN0IiwibmFtZSIsImpvaW4iLCJyZWFkQ2h1bmtlZENvb2tpZSIsImNvb2tpZXMiLCJrZXkiLCJjaHVua3MiLCJPYmplY3QiLCJlbnRyaWVzIiwic3RhcnRzV2l0aCIsInN1ZmZpeCIsInNsaWNlIiwiaWR4IiwiTnVtYmVyIiwicGFyc2VJbnQiLCJpc05hTiIsInB1c2giLCJzb3J0IiwiYSIsImIiLCJtYXAiLCJjIiwiZXh0cmFjdEFjY2Vzc1Rva2VuRnJvbVN1cGFiYXNlQ29va2llIiwicmVxdWVzdCIsImhlYWRlcnMiLCJnZXQiLCJwcmltYXJ5S2V5IiwiY2FuZGlkYXRlS2V5cyIsImtleXMiLCJpbmNsdWRlcyIsImJhc2UiLCJyYXciLCJkZWNvZGVkVmFsdWUiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJ0b2tlbiIsImdldEF1dGhDb250ZXh0IiwiYXV0aEhlYWRlciIsImJlYXJlclRva2VuIiwiY29va2llQWNjZXNzVG9rZW4iLCJzdXBhYmFzZSIsInVzZXIiLCJhdXRoRXJyb3IiLCJjb29raWVSZXN1bHQiLCJhdXRoIiwiZ2V0VXNlciIsImVycm9yIiwidG9rZW5DYW5kaWRhdGVzIiwiZmlsdGVyIiwiYW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VjY2VzcyIsInJlc3BvbnNlIiwianNvbiIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJ0b2tlbkNsaWVudCIsImdsb2JhbCIsIkF1dGhvcml6YXRpb24iLCJwZXJzaXN0U2Vzc2lvbiIsImF1dG9SZWZyZXNoVG9rZW4iLCJkZXRlY3RTZXNzaW9uSW5VcmwiLCJ0b2tlblJlc3VsdCIsInByb2ZpbGUiLCJzZWxlY3QiLCJlcSIsImlkIiwic2luZ2xlIiwibWV0YWRhdGEiLCJ1c2VyX21ldGFkYXRhIiwibWV0YWRhdGFSb2xlIiwicm9sZSIsIm1ldGFkYXRhRmlybUlkIiwiZmlybV9pZCIsImZpcm1JZCIsIm1ldGFkYXRhQWR2aXNvcklkIiwiYWR2aXNvcl9pZCIsImFkdmlzb3JJZCIsImRlZmF1bHRGaXJtSWQiLCJjb250ZXh0IiwidXNlcklkIiwiZW1haWwiLCJjb25zb2xlIiwidmFsaWRhdGVBdXRoIiwib3B0aW9ucyIsInJlcXVpcmVBdXRoIiwicmVxdWlyZVJvbGUiLCJhbGxvd1B1YmxpYyIsImF1dGhSZXN1bHQiLCJ1c2VyUm9sZSIsInJlcXVpcmVkUm9sZXMiLCJ3aXRoQXV0aCIsImhhbmRsZXIiLCJhcmdzIiwidW5kZWZpbmVkIiwiZ2V0QWR2aXNvclByb2ZpbGUiLCJnZXRGaXJtRGV0YWlscyIsImZpcm0iLCJST0xFUyIsIkFETUlOIiwiQURWSVNPUiIsIkNPTVBMSUFOQ0UiLCJTVVBQT1JUIiwiQ0xJRU5UIiwiY2FuQWNjZXNzQ2xpZW50IiwiYXV0aENvbnRleHQiLCJjbGllbnRBZHZpc29ySWQiLCJjYW5Nb2RpZnlEb2N1bWVudCIsImRvY3VtZW50QWR2aXNvcklkIiwiaXNBZG1pbiIsImlzQWR2aXNvciIsImlzQ29tcGxpYW5jZSIsIlJPTEVfUEVSTUlTU0lPTlMiLCJhZG1pbiIsImFkdmlzb3IiLCJjb21wbGlhbmNlIiwic3VwcG9ydCIsImNsaWVudCIsImhhc1Blcm1pc3Npb24iLCJwZXJtaXNzaW9uIiwicGVybWlzc2lvbnMiLCJjaGVja1Blcm1pc3Npb24iLCJyZXF1aXJlUGVybWlzc2lvbiIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImdldFZhbGlkYXRlZEZpcm1JZCIsInV1aWRSZWdleCIsInRlc3QiLCJ3YXJuIiwiaW52YWxpZElkcyIsInJlcXVpcmVGaXJtSWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth/apiAuth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/errors/index.ts":
/*!*********************************!*\
  !*** ./src/lib/errors/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError),\n/* harmony export */   AssessmentError: () => (/* binding */ AssessmentError),\n/* harmony export */   CalculationError: () => (/* binding */ CalculationError),\n/* harmony export */   DatabaseError: () => (/* binding */ DatabaseError),\n/* harmony export */   ERROR_STATUS_CODES: () => (/* binding */ ERROR_STATUS_CODES),\n/* harmony export */   ErrorCode: () => (/* binding */ ErrorCode),\n/* harmony export */   ForbiddenError: () => (/* binding */ ForbiddenError),\n/* harmony export */   InvalidStateTransitionError: () => (/* binding */ InvalidStateTransitionError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   RateLimitError: () => (/* binding */ RateLimitError),\n/* harmony export */   UnauthorizedError: () => (/* binding */ UnauthorizedError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   formatErrorResponse: () => (/* binding */ formatErrorResponse),\n/* harmony export */   getErrorDetails: () => (/* binding */ getErrorDetails),\n/* harmony export */   getErrorMessage: () => (/* binding */ getErrorMessage),\n/* harmony export */   isAppError: () => (/* binding */ isAppError),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   toAppError: () => (/* binding */ toAppError)\n/* harmony export */ });\n// =====================================================\n// FILE: src/lib/errors/index.ts\n// PURPOSE: Centralized error types for consistent error handling\n// Phase 3: Architecture & Error Handling\n// =====================================================\n/**\n * Error codes used throughout the application\n * These map to HTTP status codes and provide semantic meaning\n */ var ErrorCode;\n(function(ErrorCode) {\n    // Client errors (4xx)\n    ErrorCode[\"VALIDATION_ERROR\"] = \"VALIDATION_ERROR\";\n    ErrorCode[\"NOT_FOUND\"] = \"NOT_FOUND\";\n    ErrorCode[\"UNAUTHORIZED\"] = \"UNAUTHORIZED\";\n    ErrorCode[\"FORBIDDEN\"] = \"FORBIDDEN\";\n    ErrorCode[\"CONFLICT\"] = \"CONFLICT\";\n    ErrorCode[\"RATE_LIMITED\"] = \"RATE_LIMITED\";\n    // Business logic errors\n    ErrorCode[\"CALCULATION_ERROR\"] = \"CALCULATION_ERROR\";\n    ErrorCode[\"ASSESSMENT_ERROR\"] = \"ASSESSMENT_ERROR\";\n    ErrorCode[\"INVALID_STATE_TRANSITION\"] = \"INVALID_STATE_TRANSITION\";\n    // Server errors (5xx)\n    ErrorCode[\"DATABASE_ERROR\"] = \"DATABASE_ERROR\";\n    ErrorCode[\"EXTERNAL_SERVICE_ERROR\"] = \"EXTERNAL_SERVICE_ERROR\";\n    ErrorCode[\"INTERNAL_ERROR\"] = \"INTERNAL_ERROR\";\n})(ErrorCode || (ErrorCode = {}));\n/**\n * Maps error codes to HTTP status codes\n */ const ERROR_STATUS_CODES = {\n    [\"VALIDATION_ERROR\"]: 400,\n    [\"NOT_FOUND\"]: 404,\n    [\"UNAUTHORIZED\"]: 401,\n    [\"FORBIDDEN\"]: 403,\n    [\"CONFLICT\"]: 409,\n    [\"RATE_LIMITED\"]: 429,\n    [\"CALCULATION_ERROR\"]: 422,\n    [\"ASSESSMENT_ERROR\"]: 422,\n    [\"INVALID_STATE_TRANSITION\"]: 422,\n    [\"DATABASE_ERROR\"]: 500,\n    [\"EXTERNAL_SERVICE_ERROR\"]: 502,\n    [\"INTERNAL_ERROR\"]: 500\n};\n/**\n * Base application error class\n * All custom errors should extend this class\n */ class AppError extends Error {\n    constructor(code, message, details){\n        super(message);\n        this.name = \"AppError\";\n        this.code = code;\n        this.statusCode = ERROR_STATUS_CODES[code];\n        this.details = details;\n        this.timestamp = new Date().toISOString();\n        // Maintains proper stack trace for where error was thrown\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n    /**\n   * Convert error to JSON for API responses\n   */ toJSON() {\n        return {\n            error: {\n                code: this.code,\n                message: this.message,\n                details: this.details,\n                timestamp: this.timestamp\n            }\n        };\n    }\n}\n/**\n * Validation error - input data failed validation\n */ class ValidationError extends AppError {\n    constructor(message, details){\n        super(\"VALIDATION_ERROR\", message, details);\n        this.name = \"ValidationError\";\n    }\n}\n/**\n * Not found error - requested resource doesn't exist\n */ class NotFoundError extends AppError {\n    constructor(resource, identifier){\n        const message = identifier ? `${resource} with ID '${identifier}' not found` : `${resource} not found`;\n        super(\"NOT_FOUND\", message, {\n            resource,\n            identifier\n        });\n        this.name = \"NotFoundError\";\n    }\n}\n/**\n * Unauthorized error - authentication required\n */ class UnauthorizedError extends AppError {\n    constructor(message = \"Authentication required\"){\n        super(\"UNAUTHORIZED\", message);\n        this.name = \"UnauthorizedError\";\n    }\n}\n/**\n * Forbidden error - insufficient permissions\n */ class ForbiddenError extends AppError {\n    constructor(message = \"You do not have permission to perform this action\"){\n        super(\"FORBIDDEN\", message);\n        this.name = \"ForbiddenError\";\n    }\n}\n/**\n * Calculation error - mathematical or business logic calculation failed\n */ class CalculationError extends AppError {\n    constructor(message, details){\n        super(\"CALCULATION_ERROR\", message, details);\n        this.name = \"CalculationError\";\n    }\n}\n/**\n * Assessment error - assessment-specific business logic error\n */ class AssessmentError extends AppError {\n    constructor(message, details){\n        super(\"ASSESSMENT_ERROR\", message, details);\n        this.name = \"AssessmentError\";\n    }\n}\n/**\n * Invalid state transition error - workflow state transition not allowed\n */ class InvalidStateTransitionError extends AppError {\n    constructor(from, to, resource = \"Assessment\"){\n        super(\"INVALID_STATE_TRANSITION\", `Cannot transition ${resource} from '${from}' to '${to}'`, {\n            from,\n            to,\n            resource\n        });\n        this.name = \"InvalidStateTransitionError\";\n    }\n}\n/**\n * Database error - database operation failed\n */ class DatabaseError extends AppError {\n    constructor(message, details){\n        super(\"DATABASE_ERROR\", message, details);\n        this.name = \"DatabaseError\";\n    }\n}\n/**\n * Rate limit error - too many requests\n */ class RateLimitError extends AppError {\n    constructor(retryAfter = 60){\n        super(\"RATE_LIMITED\", \"Too many requests. Please try again later.\", {\n            retryAfter\n        });\n        this.name = \"RateLimitError\";\n        this.retryAfter = retryAfter;\n    }\n}\n// =====================================================\n// ERROR HANDLING UTILITIES\n// =====================================================\n/**\n * Type guard to check if an error is an AppError\n */ function isAppError(error) {\n    return error instanceof AppError;\n}\n/**\n * Safely extract error message from unknown error\n */ function getErrorMessage(error) {\n    if (error instanceof Error) {\n        return error.message;\n    }\n    if (typeof error === \"string\") {\n        return error;\n    }\n    return \"An unknown error occurred\";\n}\n/**\n * Safely extract error details for logging\n */ function getErrorDetails(error) {\n    if (isAppError(error)) {\n        return {\n            code: error.code,\n            message: error.message,\n            details: error.details,\n            stack: error.stack\n        };\n    }\n    if (error instanceof Error) {\n        // Check for Supabase PostgrestError which extends Error but has extra fields\n        const supabaseError = error;\n        if (\"code\" in error && \"details\" in error) {\n            return {\n                name: error.name,\n                message: error.message,\n                code: supabaseError.code,\n                details: supabaseError.details,\n                hint: supabaseError.hint,\n                stack: error.stack\n            };\n        }\n        return {\n            name: error.name,\n            message: error.message,\n            stack: error.stack\n        };\n    }\n    // Handle plain objects (like Supabase error responses that aren't Error instances)\n    if (typeof error === \"object\" && error !== null) {\n        const obj = error;\n        // Check for Supabase-style error objects\n        if (\"code\" in obj || \"message\" in obj) {\n            return {\n                code: obj.code,\n                message: obj.message,\n                details: obj.details,\n                hint: obj.hint\n            };\n        }\n        // Return the object as-is for other plain objects\n        try {\n            // Attempt to serialize - if it fails, fall back to String\n            JSON.stringify(obj);\n            return obj;\n        } catch  {\n            return {\n                error: String(error)\n            };\n        }\n    }\n    return {\n        error: String(error)\n    };\n}\n/**\n * Convert any error to an AppError for consistent API responses\n */ function toAppError(error) {\n    if (isAppError(error)) {\n        return error;\n    }\n    const message = getErrorMessage(error);\n    // Check for common error patterns\n    if (error instanceof Error) {\n        // Supabase/PostgreSQL errors\n        if (\"code\" in error && typeof error.code === \"string\") {\n            const pgCode = error.code;\n            if (pgCode === \"23505\") {\n                return new AppError(\"CONFLICT\", \"Resource already exists\", {\n                    pgCode\n                });\n            }\n            if (pgCode === \"23503\") {\n                return new AppError(\"VALIDATION_ERROR\", \"Referenced resource not found\", {\n                    pgCode\n                });\n            }\n            if (pgCode.startsWith(\"42\")) {\n                return new DatabaseError(\"Database schema error\", {\n                    pgCode\n                });\n            }\n        }\n    }\n    return new AppError(\"INTERNAL_ERROR\", message);\n}\n/**\n * Format error for NextResponse JSON\n */ function formatErrorResponse(error) {\n    const appError = toAppError(error);\n    return {\n        body: appError.toJSON(),\n        status: appError.statusCode\n    };\n}\n/**\n * Simple structured logger\n * In production, this should be replaced with a proper logging service\n */ const logger = {\n    debug (message, context) {\n        if (true) {\n            console.debug(JSON.stringify({\n                level: \"debug\",\n                message,\n                context,\n                timestamp: new Date().toISOString()\n            }));\n        }\n    },\n    info (message, context) {\n        console.info(JSON.stringify({\n            level: \"info\",\n            message,\n            context,\n            timestamp: new Date().toISOString()\n        }));\n    },\n    warn (message, context) {\n        console.warn(JSON.stringify({\n            level: \"warn\",\n            message,\n            context,\n            timestamp: new Date().toISOString()\n        }));\n    },\n    error (message, error, context) {\n        const errorDetails = error ? getErrorDetails(error) : undefined;\n        console.error(JSON.stringify({\n            level: \"error\",\n            message,\n            error: errorDetails,\n            context,\n            timestamp: new Date().toISOString()\n        }));\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckRFLFFBQVFFLElBQUksQ0FBQ2hCLEtBQUtDLFNBQVMsQ0FBQztZQUFFYyxPQUFPO1lBQVE5QztZQUFTMkM7WUFBU3ZDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUFHO0lBQ3JHO0lBRUEwQyxNQUFLaEQsT0FBZSxFQUFFMkMsT0FBaUM7UUFDckRFLFFBQVFHLElBQUksQ0FBQ2pCLEtBQUtDLFNBQVMsQ0FBQztZQUFFYyxPQUFPO1lBQVE5QztZQUFTMkM7WUFBU3ZDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUFHO0lBQ3JHO0lBRUFHLE9BQU1ULE9BQWUsRUFBRVMsS0FBZSxFQUFFa0MsT0FBaUM7UUFDdkUsTUFBTU0sZUFBZXhDLFFBQVFpQixnQkFBZ0JqQixTQUFTeUM7UUFDdERMLFFBQVFwQyxLQUFLLENBQUNzQixLQUFLQyxTQUFTLENBQUM7WUFDM0JjLE9BQU87WUFDUDlDO1lBQ0FTLE9BQU93QztZQUNQTjtZQUNBdkMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DO0lBQ0Y7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhbm5ldGljLXBsYXRmb3JtLy4vc3JjL2xpYi9lcnJvcnMvaW5kZXgudHM/OTM4NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRklMRTogc3JjL2xpYi9lcnJvcnMvaW5kZXgudHNcbi8vIFBVUlBPU0U6IENlbnRyYWxpemVkIGVycm9yIHR5cGVzIGZvciBjb25zaXN0ZW50IGVycm9yIGhhbmRsaW5nXG4vLyBQaGFzZSAzOiBBcmNoaXRlY3R1cmUgJiBFcnJvciBIYW5kbGluZ1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBFcnJvciBjb2RlcyB1c2VkIHRocm91Z2hvdXQgdGhlIGFwcGxpY2F0aW9uXG4gKiBUaGVzZSBtYXAgdG8gSFRUUCBzdGF0dXMgY29kZXMgYW5kIHByb3ZpZGUgc2VtYW50aWMgbWVhbmluZ1xuICovXG5leHBvcnQgZW51bSBFcnJvckNvZGUge1xuICAvLyBDbGllbnQgZXJyb3JzICg0eHgpXG4gIFZBTElEQVRJT05fRVJST1IgPSAnVkFMSURBVElPTl9FUlJPUicsXG4gIE5PVF9GT1VORCA9ICdOT1RfRk9VTkQnLFxuICBVTkFVVEhPUklaRUQgPSAnVU5BVVRIT1JJWkVEJyxcbiAgRk9SQklEREVOID0gJ0ZPUkJJRERFTicsXG4gIENPTkZMSUNUID0gJ0NPTkZMSUNUJyxcbiAgUkFURV9MSU1JVEVEID0gJ1JBVEVfTElNSVRFRCcsXG5cbiAgLy8gQnVzaW5lc3MgbG9naWMgZXJyb3JzXG4gIENBTENVTEFUSU9OX0VSUk9SID0gJ0NBTENVTEFUSU9OX0VSUk9SJyxcbiAgQVNTRVNTTUVOVF9FUlJPUiA9ICdBU1NFU1NNRU5UX0VSUk9SJyxcbiAgSU5WQUxJRF9TVEFURV9UUkFOU0lUSU9OID0gJ0lOVkFMSURfU1RBVEVfVFJBTlNJVElPTicsXG5cbiAgLy8gU2VydmVyIGVycm9ycyAoNXh4KVxuICBEQVRBQkFTRV9FUlJPUiA9ICdEQVRBQkFTRV9FUlJPUicsXG4gIEVYVEVSTkFMX1NFUlZJQ0VfRVJST1IgPSAnRVhURVJOQUxfU0VSVklDRV9FUlJPUicsXG4gIElOVEVSTkFMX0VSUk9SID0gJ0lOVEVSTkFMX0VSUk9SJyxcbn1cblxuLyoqXG4gKiBNYXBzIGVycm9yIGNvZGVzIHRvIEhUVFAgc3RhdHVzIGNvZGVzXG4gKi9cbmV4cG9ydCBjb25zdCBFUlJPUl9TVEFUVVNfQ09ERVM6IFJlY29yZDxFcnJvckNvZGUsIG51bWJlcj4gPSB7XG4gIFtFcnJvckNvZGUuVkFMSURBVElPTl9FUlJPUl06IDQwMCxcbiAgW0Vycm9yQ29kZS5OT1RfRk9VTkRdOiA0MDQsXG4gIFtFcnJvckNvZGUuVU5BVVRIT1JJWkVEXTogNDAxLFxuICBbRXJyb3JDb2RlLkZPUkJJRERFTl06IDQwMyxcbiAgW0Vycm9yQ29kZS5DT05GTElDVF06IDQwOSxcbiAgW0Vycm9yQ29kZS5SQVRFX0xJTUlURURdOiA0MjksXG4gIFtFcnJvckNvZGUuQ0FMQ1VMQVRJT05fRVJST1JdOiA0MjIsXG4gIFtFcnJvckNvZGUuQVNTRVNTTUVOVF9FUlJPUl06IDQyMixcbiAgW0Vycm9yQ29kZS5JTlZBTElEX1NUQVRFX1RSQU5TSVRJT05dOiA0MjIsXG4gIFtFcnJvckNvZGUuREFUQUJBU0VfRVJST1JdOiA1MDAsXG4gIFtFcnJvckNvZGUuRVhURVJOQUxfU0VSVklDRV9FUlJPUl06IDUwMixcbiAgW0Vycm9yQ29kZS5JTlRFUk5BTF9FUlJPUl06IDUwMCxcbn1cblxuLyoqXG4gKiBCYXNlIGFwcGxpY2F0aW9uIGVycm9yIGNsYXNzXG4gKiBBbGwgY3VzdG9tIGVycm9ycyBzaG91bGQgZXh0ZW5kIHRoaXMgY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEFwcEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgY29kZTogRXJyb3JDb2RlXG4gIHB1YmxpYyByZWFkb25seSBzdGF0dXNDb2RlOiBudW1iZXJcbiAgcHVibGljIHJlYWRvbmx5IGRldGFpbHM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICBwdWJsaWMgcmVhZG9ubHkgdGltZXN0YW1wOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb2RlOiBFcnJvckNvZGUsXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGRldGFpbHM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKVxuICAgIHRoaXMubmFtZSA9ICdBcHBFcnJvcidcbiAgICB0aGlzLmNvZGUgPSBjb2RlXG4gICAgdGhpcy5zdGF0dXNDb2RlID0gRVJST1JfU1RBVFVTX0NPREVTW2NvZGVdXG4gICAgdGhpcy5kZXRhaWxzID0gZGV0YWlsc1xuICAgIHRoaXMudGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG5cbiAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBlcnJvciB3YXMgdGhyb3duXG4gICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGVycm9yIHRvIEpTT04gZm9yIEFQSSByZXNwb25zZXNcbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogdGhpcy5jb2RlLFxuICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICAgIGRldGFpbHM6IHRoaXMuZGV0YWlscyxcbiAgICAgICAgdGltZXN0YW1wOiB0aGlzLnRpbWVzdGFtcCxcbiAgICAgIH0sXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGlvbiBlcnJvciAtIGlucHV0IGRhdGEgZmFpbGVkIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgICBzdXBlcihFcnJvckNvZGUuVkFMSURBVElPTl9FUlJPUiwgbWVzc2FnZSwgZGV0YWlscylcbiAgICB0aGlzLm5hbWUgPSAnVmFsaWRhdGlvbkVycm9yJ1xuICB9XG59XG5cbi8qKlxuICogTm90IGZvdW5kIGVycm9yIC0gcmVxdWVzdGVkIHJlc291cmNlIGRvZXNuJ3QgZXhpc3RcbiAqL1xuZXhwb3J0IGNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlc291cmNlOiBzdHJpbmcsIGlkZW50aWZpZXI/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gaWRlbnRpZmllclxuICAgICAgPyBgJHtyZXNvdXJjZX0gd2l0aCBJRCAnJHtpZGVudGlmaWVyfScgbm90IGZvdW5kYFxuICAgICAgOiBgJHtyZXNvdXJjZX0gbm90IGZvdW5kYFxuICAgIHN1cGVyKEVycm9yQ29kZS5OT1RfRk9VTkQsIG1lc3NhZ2UsIHsgcmVzb3VyY2UsIGlkZW50aWZpZXIgfSlcbiAgICB0aGlzLm5hbWUgPSAnTm90Rm91bmRFcnJvcidcbiAgfVxufVxuXG4vKipcbiAqIFVuYXV0aG9yaXplZCBlcnJvciAtIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkXG4gKi9cbmV4cG9ydCBjbGFzcyBVbmF1dGhvcml6ZWRFcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcpIHtcbiAgICBzdXBlcihFcnJvckNvZGUuVU5BVVRIT1JJWkVELCBtZXNzYWdlKVxuICAgIHRoaXMubmFtZSA9ICdVbmF1dGhvcml6ZWRFcnJvcidcbiAgfVxufVxuXG4vKipcbiAqIEZvcmJpZGRlbiBlcnJvciAtIGluc3VmZmljaWVudCBwZXJtaXNzaW9uc1xuICovXG5leHBvcnQgY2xhc3MgRm9yYmlkZGVuRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UgPSAnWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gcGVyZm9ybSB0aGlzIGFjdGlvbicpIHtcbiAgICBzdXBlcihFcnJvckNvZGUuRk9SQklEREVOLCBtZXNzYWdlKVxuICAgIHRoaXMubmFtZSA9ICdGb3JiaWRkZW5FcnJvcidcbiAgfVxufVxuXG4vKipcbiAqIENhbGN1bGF0aW9uIGVycm9yIC0gbWF0aGVtYXRpY2FsIG9yIGJ1c2luZXNzIGxvZ2ljIGNhbGN1bGF0aW9uIGZhaWxlZFxuICovXG5leHBvcnQgY2xhc3MgQ2FsY3VsYXRpb25FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgICBzdXBlcihFcnJvckNvZGUuQ0FMQ1VMQVRJT05fRVJST1IsIG1lc3NhZ2UsIGRldGFpbHMpXG4gICAgdGhpcy5uYW1lID0gJ0NhbGN1bGF0aW9uRXJyb3InXG4gIH1cbn1cblxuLyoqXG4gKiBBc3Nlc3NtZW50IGVycm9yIC0gYXNzZXNzbWVudC1zcGVjaWZpYyBidXNpbmVzcyBsb2dpYyBlcnJvclxuICovXG5leHBvcnQgY2xhc3MgQXNzZXNzbWVudEVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGRldGFpbHM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgIHN1cGVyKEVycm9yQ29kZS5BU1NFU1NNRU5UX0VSUk9SLCBtZXNzYWdlLCBkZXRhaWxzKVxuICAgIHRoaXMubmFtZSA9ICdBc3Nlc3NtZW50RXJyb3InXG4gIH1cbn1cblxuLyoqXG4gKiBJbnZhbGlkIHN0YXRlIHRyYW5zaXRpb24gZXJyb3IgLSB3b3JrZmxvdyBzdGF0ZSB0cmFuc2l0aW9uIG5vdCBhbGxvd2VkXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkU3RhdGVUcmFuc2l0aW9uRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGZyb206IHN0cmluZywgdG86IHN0cmluZywgcmVzb3VyY2UgPSAnQXNzZXNzbWVudCcpIHtcbiAgICBzdXBlcihcbiAgICAgIEVycm9yQ29kZS5JTlZBTElEX1NUQVRFX1RSQU5TSVRJT04sXG4gICAgICBgQ2Fubm90IHRyYW5zaXRpb24gJHtyZXNvdXJjZX0gZnJvbSAnJHtmcm9tfScgdG8gJyR7dG99J2AsXG4gICAgICB7IGZyb20sIHRvLCByZXNvdXJjZSB9XG4gICAgKVxuICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkU3RhdGVUcmFuc2l0aW9uRXJyb3InXG4gIH1cbn1cblxuLyoqXG4gKiBEYXRhYmFzZSBlcnJvciAtIGRhdGFiYXNlIG9wZXJhdGlvbiBmYWlsZWRcbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFiYXNlRXJyb3IgZXh0ZW5kcyBBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBkZXRhaWxzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgKSB7XG4gICAgc3VwZXIoRXJyb3JDb2RlLkRBVEFCQVNFX0VSUk9SLCBtZXNzYWdlLCBkZXRhaWxzKVxuICAgIHRoaXMubmFtZSA9ICdEYXRhYmFzZUVycm9yJ1xuICB9XG59XG5cbi8qKlxuICogUmF0ZSBsaW1pdCBlcnJvciAtIHRvbyBtYW55IHJlcXVlc3RzXG4gKi9cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRFcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IHJldHJ5QWZ0ZXI6IG51bWJlclxuXG4gIGNvbnN0cnVjdG9yKHJldHJ5QWZ0ZXIgPSA2MCkge1xuICAgIHN1cGVyKEVycm9yQ29kZS5SQVRFX0xJTUlURUQsICdUb28gbWFueSByZXF1ZXN0cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLCB7XG4gICAgICByZXRyeUFmdGVyLFxuICAgIH0pXG4gICAgdGhpcy5uYW1lID0gJ1JhdGVMaW1pdEVycm9yJ1xuICAgIHRoaXMucmV0cnlBZnRlciA9IHJldHJ5QWZ0ZXJcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVJST1IgSEFORExJTkcgVVRJTElUSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFR5cGUgZ3VhcmQgdG8gY2hlY2sgaWYgYW4gZXJyb3IgaXMgYW4gQXBwRXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXBwRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBBcHBFcnJvciB7XG4gIHJldHVybiBlcnJvciBpbnN0YW5jZW9mIEFwcEVycm9yXG59XG5cbi8qKlxuICogU2FmZWx5IGV4dHJhY3QgZXJyb3IgbWVzc2FnZSBmcm9tIHVua25vd24gZXJyb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZShlcnJvcjogdW5rbm93bik6IHN0cmluZyB7XG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgcmV0dXJuIGVycm9yLm1lc3NhZ2VcbiAgfVxuICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBlcnJvclxuICB9XG4gIHJldHVybiAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCdcbn1cblxuLyoqXG4gKiBTYWZlbHkgZXh0cmFjdCBlcnJvciBkZXRhaWxzIGZvciBsb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvckRldGFpbHMoZXJyb3I6IHVua25vd24pOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIGlmIChpc0FwcEVycm9yKGVycm9yKSkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgfVxuICB9XG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgLy8gQ2hlY2sgZm9yIFN1cGFiYXNlIFBvc3RncmVzdEVycm9yIHdoaWNoIGV4dGVuZHMgRXJyb3IgYnV0IGhhcyBleHRyYSBmaWVsZHNcbiAgICBjb25zdCBzdXBhYmFzZUVycm9yID0gZXJyb3IgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICBpZiAoJ2NvZGUnIGluIGVycm9yICYmICdkZXRhaWxzJyBpbiBlcnJvcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogZXJyb3IubmFtZSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29kZTogc3VwYWJhc2VFcnJvci5jb2RlLFxuICAgICAgICBkZXRhaWxzOiBzdXBhYmFzZUVycm9yLmRldGFpbHMsXG4gICAgICAgIGhpbnQ6IHN1cGFiYXNlRXJyb3IuaGludCxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogZXJyb3IubmFtZSxcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgfVxuICB9XG4gIC8vIEhhbmRsZSBwbGFpbiBvYmplY3RzIChsaWtlIFN1cGFiYXNlIGVycm9yIHJlc3BvbnNlcyB0aGF0IGFyZW4ndCBFcnJvciBpbnN0YW5jZXMpXG4gIGlmICh0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsKSB7XG4gICAgY29uc3Qgb2JqID0gZXJyb3IgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgLy8gQ2hlY2sgZm9yIFN1cGFiYXNlLXN0eWxlIGVycm9yIG9iamVjdHNcbiAgICBpZiAoJ2NvZGUnIGluIG9iaiB8fCAnbWVzc2FnZScgaW4gb2JqKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb2RlOiBvYmouY29kZSxcbiAgICAgICAgbWVzc2FnZTogb2JqLm1lc3NhZ2UsXG4gICAgICAgIGRldGFpbHM6IG9iai5kZXRhaWxzLFxuICAgICAgICBoaW50OiBvYmouaGludCxcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmV0dXJuIHRoZSBvYmplY3QgYXMtaXMgZm9yIG90aGVyIHBsYWluIG9iamVjdHNcbiAgICB0cnkge1xuICAgICAgLy8gQXR0ZW1wdCB0byBzZXJpYWxpemUgLSBpZiBpdCBmYWlscywgZmFsbCBiYWNrIHRvIFN0cmluZ1xuICAgICAgSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4geyBlcnJvcjogU3RyaW5nKGVycm9yKSB9XG4gICAgfVxuICB9XG4gIHJldHVybiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFueSBlcnJvciB0byBhbiBBcHBFcnJvciBmb3IgY29uc2lzdGVudCBBUEkgcmVzcG9uc2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0FwcEVycm9yKGVycm9yOiB1bmtub3duKTogQXBwRXJyb3Ige1xuICBpZiAoaXNBcHBFcnJvcihlcnJvcikpIHtcbiAgICByZXR1cm4gZXJyb3JcbiAgfVxuXG4gIGNvbnN0IG1lc3NhZ2UgPSBnZXRFcnJvck1lc3NhZ2UoZXJyb3IpXG5cbiAgLy8gQ2hlY2sgZm9yIGNvbW1vbiBlcnJvciBwYXR0ZXJuc1xuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIC8vIFN1cGFiYXNlL1Bvc3RncmVTUUwgZXJyb3JzXG4gICAgaWYgKCdjb2RlJyBpbiBlcnJvciAmJiB0eXBlb2YgKGVycm9yIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5jb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgcGdDb2RlID0gKGVycm9yIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5jb2RlIGFzIHN0cmluZ1xuICAgICAgaWYgKHBnQ29kZSA9PT0gJzIzNTA1Jykge1xuICAgICAgICByZXR1cm4gbmV3IEFwcEVycm9yKEVycm9yQ29kZS5DT05GTElDVCwgJ1Jlc291cmNlIGFscmVhZHkgZXhpc3RzJywgeyBwZ0NvZGUgfSlcbiAgICAgIH1cbiAgICAgIGlmIChwZ0NvZGUgPT09ICcyMzUwMycpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcHBFcnJvcihFcnJvckNvZGUuVkFMSURBVElPTl9FUlJPUiwgJ1JlZmVyZW5jZWQgcmVzb3VyY2Ugbm90IGZvdW5kJywgeyBwZ0NvZGUgfSlcbiAgICAgIH1cbiAgICAgIGlmIChwZ0NvZGUuc3RhcnRzV2l0aCgnNDInKSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlRXJyb3IoJ0RhdGFiYXNlIHNjaGVtYSBlcnJvcicsIHsgcGdDb2RlIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBBcHBFcnJvcihFcnJvckNvZGUuSU5URVJOQUxfRVJST1IsIG1lc3NhZ2UpXG59XG5cbi8qKlxuICogRm9ybWF0IGVycm9yIGZvciBOZXh0UmVzcG9uc2UgSlNPTlxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvcjogdW5rbm93bik6IHtcbiAgYm9keTogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgc3RhdHVzOiBudW1iZXJcbn0ge1xuICBjb25zdCBhcHBFcnJvciA9IHRvQXBwRXJyb3IoZXJyb3IpXG4gIHJldHVybiB7XG4gICAgYm9keTogYXBwRXJyb3IudG9KU09OKCksXG4gICAgc3RhdHVzOiBhcHBFcnJvci5zdGF0dXNDb2RlLFxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMT0dHSU5HIEhFTFBFUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogTG9nIGxldmVscyBmb3Igc3RydWN0dXJlZCBsb2dnaW5nXG4gKi9cbmV4cG9ydCB0eXBlIExvZ0xldmVsID0gJ2RlYnVnJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcidcblxuLyoqXG4gKiBTdHJ1Y3R1cmVkIGxvZyBlbnRyeVxuICovXG5leHBvcnQgaW50ZXJmYWNlIExvZ0VudHJ5IHtcbiAgbGV2ZWw6IExvZ0xldmVsXG4gIG1lc3NhZ2U6IHN0cmluZ1xuICBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgZXJyb3I/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxuICB0aW1lc3RhbXA6IHN0cmluZ1xufVxuXG4vKipcbiAqIFNpbXBsZSBzdHJ1Y3R1cmVkIGxvZ2dlclxuICogSW4gcHJvZHVjdGlvbiwgdGhpcyBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCBhIHByb3BlciBsb2dnaW5nIHNlcnZpY2VcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IHtcbiAgZGVidWcobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoSlNPTi5zdHJpbmdpZnkoeyBsZXZlbDogJ2RlYnVnJywgbWVzc2FnZSwgY29udGV4dCwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSkpXG4gICAgfVxuICB9LFxuXG4gIGluZm8obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgICBjb25zb2xlLmluZm8oSlNPTi5zdHJpbmdpZnkoeyBsZXZlbDogJ2luZm8nLCBtZXNzYWdlLCBjb250ZXh0LCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KSlcbiAgfSxcblxuICB3YXJuKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB7XG4gICAgY29uc29sZS53YXJuKEpTT04uc3RyaW5naWZ5KHsgbGV2ZWw6ICd3YXJuJywgbWVzc2FnZSwgY29udGV4dCwgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSkpXG4gIH0sXG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IHVua25vd24sIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgIGNvbnN0IGVycm9yRGV0YWlscyA9IGVycm9yID8gZ2V0RXJyb3JEZXRhaWxzKGVycm9yKSA6IHVuZGVmaW5lZFxuICAgIGNvbnNvbGUuZXJyb3IoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgICBtZXNzYWdlLFxuICAgICAgZXJyb3I6IGVycm9yRGV0YWlscyxcbiAgICAgIGNvbnRleHQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pKVxuICB9LFxufVxuIl0sIm5hbWVzIjpbIkVycm9yQ29kZSIsIkVSUk9SX1NUQVRVU19DT0RFUyIsIkFwcEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsImNvZGUiLCJtZXNzYWdlIiwiZGV0YWlscyIsIm5hbWUiLCJzdGF0dXNDb2RlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJ0b0pTT04iLCJlcnJvciIsIlZhbGlkYXRpb25FcnJvciIsIk5vdEZvdW5kRXJyb3IiLCJyZXNvdXJjZSIsImlkZW50aWZpZXIiLCJVbmF1dGhvcml6ZWRFcnJvciIsIkZvcmJpZGRlbkVycm9yIiwiQ2FsY3VsYXRpb25FcnJvciIsIkFzc2Vzc21lbnRFcnJvciIsIkludmFsaWRTdGF0ZVRyYW5zaXRpb25FcnJvciIsImZyb20iLCJ0byIsIkRhdGFiYXNlRXJyb3IiLCJSYXRlTGltaXRFcnJvciIsInJldHJ5QWZ0ZXIiLCJpc0FwcEVycm9yIiwiZ2V0RXJyb3JNZXNzYWdlIiwiZ2V0RXJyb3JEZXRhaWxzIiwic3RhY2siLCJzdXBhYmFzZUVycm9yIiwiaGludCIsIm9iaiIsIkpTT04iLCJzdHJpbmdpZnkiLCJTdHJpbmciLCJ0b0FwcEVycm9yIiwicGdDb2RlIiwic3RhcnRzV2l0aCIsImZvcm1hdEVycm9yUmVzcG9uc2UiLCJhcHBFcnJvciIsImJvZHkiLCJzdGF0dXMiLCJsb2dnZXIiLCJkZWJ1ZyIsImNvbnRleHQiLCJwcm9jZXNzIiwiY29uc29sZSIsImxldmVsIiwiaW5mbyIsIndhcm4iLCJlcnJvckRldGFpbHMiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/errors/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/logging/structured.ts":
/*!***************************************!*\
  !*** ./src/lib/logging/structured.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   configureLogger: () => (/* binding */ configureLogger),\n/* harmony export */   createRequestLogger: () => (/* binding */ createRequestLogger),\n/* harmony export */   getRequestMetadata: () => (/* binding */ getRequestMetadata),\n/* harmony export */   log: () => (/* binding */ log),\n/* harmony export */   withRequestLogging: () => (/* binding */ withRequestLogging)\n/* harmony export */ });\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors/index.ts\");\n// =====================================================\n// FILE: src/lib/logging/structured.ts\n// PURPOSE: Production-grade structured logging with correlation IDs\n// Phase B: Observability Infrastructure\n// =====================================================\n\nconst LOG_LEVEL_PRIORITY = {\n    debug: 0,\n    info: 1,\n    warn: 2,\n    error: 3\n};\n/**\n * Global logger configuration\n */ const globalConfig = {\n    serviceName: \"ifa-platform\",\n    environment: \"development\" || 0,\n    minLevel:  false ? 0 : \"debug\"\n};\n/**\n * Format and output a log entry\n */ function outputLog(entry) {\n    const minPriority = LOG_LEVEL_PRIORITY[globalConfig.minLevel || \"debug\"];\n    const entryPriority = LOG_LEVEL_PRIORITY[entry.level];\n    if (entryPriority < minPriority) {\n        return;\n    }\n    const logObject = {\n        ...entry,\n        service: globalConfig.serviceName,\n        env: globalConfig.environment\n    };\n    const logString = JSON.stringify(logObject);\n    switch(entry.level){\n        case \"debug\":\n            console.debug(logString);\n            break;\n        case \"info\":\n            console.info(logString);\n            break;\n        case \"warn\":\n            console.warn(logString);\n            break;\n        case \"error\":\n            console.error(logString);\n            break;\n    }\n}\n/**\n * Create a request-scoped logger with correlation ID\n * Use this in API routes to correlate all logs for a single request\n */ function createRequestLogger(request) {\n    // Generate or extract request ID\n    const requestId = request?.headers.get(\"x-request-id\") || request?.headers.get(\"x-correlation-id\") || crypto.randomUUID();\n    const startTime = Date.now();\n    const createEntry = (level, message, context, error)=>({\n            level,\n            message,\n            requestId,\n            timestamp: new Date().toISOString(),\n            durationMs: Date.now() - startTime,\n            context,\n            error: error ? (0,_lib_errors__WEBPACK_IMPORTED_MODULE_0__.getErrorDetails)(error) : undefined\n        });\n    return {\n        requestId,\n        startTime,\n        debug (message, context) {\n            outputLog(createEntry(\"debug\", message, context));\n        },\n        info (message, context) {\n            outputLog(createEntry(\"info\", message, context));\n        },\n        warn (message, context) {\n            outputLog(createEntry(\"warn\", message, context));\n        },\n        error (message, error, context) {\n            outputLog(createEntry(\"error\", message, context, error));\n        },\n        duration () {\n            return Date.now() - startTime;\n        },\n        logRequestComplete (statusCode, context) {\n            const duration = Date.now() - startTime;\n            const level = statusCode >= 500 ? \"error\" : statusCode >= 400 ? \"warn\" : \"info\";\n            outputLog(createEntry(level, \"Request completed\", {\n                ...context,\n                statusCode,\n                durationMs: duration\n            }));\n        }\n    };\n}\n/**\n * Extract useful request metadata for logging\n */ function getRequestMetadata(request) {\n    const url = new URL(request.url);\n    return {\n        method: request.method,\n        path: url.pathname,\n        query: Object.fromEntries(url.searchParams),\n        userAgent: request.headers.get(\"user-agent\")?.slice(0, 100),\n        ip: request.headers.get(\"x-forwarded-for\")?.split(\",\")[0]?.trim() || request.headers.get(\"x-real-ip\") || \"unknown\"\n    };\n}\n/**\n * Standalone logger for non-request contexts (services, jobs, etc.)\n */ const log = {\n    debug (message, context) {\n        outputLog({\n            level: \"debug\",\n            message,\n            timestamp: new Date().toISOString(),\n            context\n        });\n    },\n    info (message, context) {\n        outputLog({\n            level: \"info\",\n            message,\n            timestamp: new Date().toISOString(),\n            context\n        });\n    },\n    warn (message, context) {\n        outputLog({\n            level: \"warn\",\n            message,\n            timestamp: new Date().toISOString(),\n            context\n        });\n    },\n    error (message, error, context) {\n        outputLog({\n            level: \"error\",\n            message,\n            timestamp: new Date().toISOString(),\n            context,\n            error: error ? (0,_lib_errors__WEBPACK_IMPORTED_MODULE_0__.getErrorDetails)(error) : undefined\n        });\n    }\n};\n/**\n * Configure global logger settings\n */ function configureLogger(config) {\n    Object.assign(globalConfig, config);\n}\n/**\n * Higher-order function to wrap API route handlers with logging\n */ function withRequestLogging(handler) {\n    return async (request)=>{\n        const logger = createRequestLogger(request);\n        const metadata = getRequestMetadata(request);\n        logger.info(\"Request started\", metadata);\n        try {\n            const result = await handler(request, logger);\n            return result;\n        } catch (error) {\n            logger.error(\"Request failed\", error, metadata);\n            throw error;\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBRXBFLE9BQU8sT0FBT3ZDO1FBQ1osTUFBTXdDLFNBQVN6QyxvQkFBb0JDO1FBQ25DLE1BQU15QyxXQUFXdEIsbUJBQW1CbkI7UUFFcEN3QyxPQUFPN0QsSUFBSSxDQUFDLG1CQUFtQjhEO1FBRS9CLElBQUk7WUFDRixNQUFNQyxTQUFTLE1BQU1ILFFBQVF2QyxTQUFTd0M7WUFDdEMsT0FBT0U7UUFDVCxFQUFFLE9BQU83RCxPQUFPO1lBQ2QyRCxPQUFPM0QsS0FBSyxDQUFDLGtCQUFrQkEsT0FBTzREO1lBQ3RDLE1BQU01RDtRQUNSO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BsYW5uZXRpYy1wbGF0Zm9ybS8uL3NyYy9saWIvbG9nZ2luZy9zdHJ1Y3R1cmVkLnRzP2JiOGMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZJTEU6IHNyYy9saWIvbG9nZ2luZy9zdHJ1Y3R1cmVkLnRzXG4vLyBQVVJQT1NFOiBQcm9kdWN0aW9uLWdyYWRlIHN0cnVjdHVyZWQgbG9nZ2luZyB3aXRoIGNvcnJlbGF0aW9uIElEc1xuLy8gUGhhc2UgQjogT2JzZXJ2YWJpbGl0eSBJbmZyYXN0cnVjdHVyZVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGdldEVycm9yRGV0YWlscyB9IGZyb20gJ0AvbGliL2Vycm9ycydcblxuLyoqXG4gKiBMb2cgbGV2ZWxzIGZvciBzdHJ1Y3R1cmVkIGxvZ2dpbmdcbiAqL1xuZXhwb3J0IHR5cGUgTG9nTGV2ZWwgPSAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJ1xuXG4vKipcbiAqIFN0cnVjdHVyZWQgbG9nIGVudHJ5IGZvcm1hdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIExvZ0VudHJ5IHtcbiAgbGV2ZWw6IExvZ0xldmVsXG4gIG1lc3NhZ2U6IHN0cmluZ1xuICByZXF1ZXN0SWQ/OiBzdHJpbmdcbiAgdGltZXN0YW1wOiBzdHJpbmdcbiAgZHVyYXRpb25Ncz86IG51bWJlclxuICBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgZXJyb3I/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPlxufVxuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gZm9yIHRoZSBsb2dnZXJcbiAqL1xuaW50ZXJmYWNlIExvZ2dlckNvbmZpZyB7XG4gIHNlcnZpY2VOYW1lPzogc3RyaW5nXG4gIGVudmlyb25tZW50Pzogc3RyaW5nXG4gIG1pbkxldmVsPzogTG9nTGV2ZWxcbn1cblxuY29uc3QgTE9HX0xFVkVMX1BSSU9SSVRZOiBSZWNvcmQ8TG9nTGV2ZWwsIG51bWJlcj4gPSB7XG4gIGRlYnVnOiAwLFxuICBpbmZvOiAxLFxuICB3YXJuOiAyLFxuICBlcnJvcjogM1xufVxuXG4vKipcbiAqIEdsb2JhbCBsb2dnZXIgY29uZmlndXJhdGlvblxuICovXG5jb25zdCBnbG9iYWxDb25maWc6IExvZ2dlckNvbmZpZyA9IHtcbiAgc2VydmljZU5hbWU6ICdpZmEtcGxhdGZvcm0nLFxuICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50JyxcbiAgbWluTGV2ZWw6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnaW5mbycgOiAnZGVidWcnXG59XG5cbi8qKlxuICogRm9ybWF0IGFuZCBvdXRwdXQgYSBsb2cgZW50cnlcbiAqL1xuZnVuY3Rpb24gb3V0cHV0TG9nKGVudHJ5OiBMb2dFbnRyeSk6IHZvaWQge1xuICBjb25zdCBtaW5Qcmlvcml0eSA9IExPR19MRVZFTF9QUklPUklUWVtnbG9iYWxDb25maWcubWluTGV2ZWwgfHwgJ2RlYnVnJ11cbiAgY29uc3QgZW50cnlQcmlvcml0eSA9IExPR19MRVZFTF9QUklPUklUWVtlbnRyeS5sZXZlbF1cblxuICBpZiAoZW50cnlQcmlvcml0eSA8IG1pblByaW9yaXR5KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBjb25zdCBsb2dPYmplY3QgPSB7XG4gICAgLi4uZW50cnksXG4gICAgc2VydmljZTogZ2xvYmFsQ29uZmlnLnNlcnZpY2VOYW1lLFxuICAgIGVudjogZ2xvYmFsQ29uZmlnLmVudmlyb25tZW50XG4gIH1cblxuICBjb25zdCBsb2dTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShsb2dPYmplY3QpXG5cbiAgc3dpdGNoIChlbnRyeS5sZXZlbCkge1xuICAgIGNhc2UgJ2RlYnVnJzpcbiAgICAgIGNvbnNvbGUuZGVidWcobG9nU3RyaW5nKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdpbmZvJzpcbiAgICAgIGNvbnNvbGUuaW5mbyhsb2dTdHJpbmcpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3dhcm4nOlxuICAgICAgY29uc29sZS53YXJuKGxvZ1N0cmluZylcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnZXJyb3InOlxuICAgICAgY29uc29sZS5lcnJvcihsb2dTdHJpbmcpXG4gICAgICBicmVha1xuICB9XG59XG5cbi8qKlxuICogUmVxdWVzdC1zY29wZWQgbG9nZ2VyIHdpdGggY29ycmVsYXRpb24gSURcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0TG9nZ2VyIHtcbiAgcmVxdWVzdElkOiBzdHJpbmdcbiAgc3RhcnRUaW1lOiBudW1iZXJcblxuICBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWRcbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWRcbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWRcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IHVua25vd24sIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHZvaWRcblxuICAvKiogR2V0IGVsYXBzZWQgdGltZSBpbiBtaWxsaXNlY29uZHMgKi9cbiAgZHVyYXRpb24oKTogbnVtYmVyXG5cbiAgLyoqIExvZyByZXF1ZXN0IGNvbXBsZXRpb24gd2l0aCB0aW1pbmcgKi9cbiAgbG9nUmVxdWVzdENvbXBsZXRlKHN0YXR1c0NvZGU6IG51bWJlciwgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KTogdm9pZFxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJlcXVlc3Qtc2NvcGVkIGxvZ2dlciB3aXRoIGNvcnJlbGF0aW9uIElEXG4gKiBVc2UgdGhpcyBpbiBBUEkgcm91dGVzIHRvIGNvcnJlbGF0ZSBhbGwgbG9ncyBmb3IgYSBzaW5nbGUgcmVxdWVzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVxdWVzdExvZ2dlcihyZXF1ZXN0PzogTmV4dFJlcXVlc3QpOiBSZXF1ZXN0TG9nZ2VyIHtcbiAgLy8gR2VuZXJhdGUgb3IgZXh0cmFjdCByZXF1ZXN0IElEXG4gIGNvbnN0IHJlcXVlc3RJZCA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KCd4LXJlcXVlc3QtaWQnKVxuICAgIHx8IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KCd4LWNvcnJlbGF0aW9uLWlkJylcbiAgICB8fCBjcnlwdG8ucmFuZG9tVVVJRCgpXG5cbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuXG4gIGNvbnN0IGNyZWF0ZUVudHJ5ID0gKFxuICAgIGxldmVsOiBMb2dMZXZlbCxcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICAgIGVycm9yPzogdW5rbm93blxuICApOiBMb2dFbnRyeSA9PiAoe1xuICAgIGxldmVsLFxuICAgIG1lc3NhZ2UsXG4gICAgcmVxdWVzdElkLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIGR1cmF0aW9uTXM6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgY29udGV4dCxcbiAgICBlcnJvcjogZXJyb3IgPyBnZXRFcnJvckRldGFpbHMoZXJyb3IpIDogdW5kZWZpbmVkXG4gIH0pXG5cbiAgcmV0dXJuIHtcbiAgICByZXF1ZXN0SWQsXG4gICAgc3RhcnRUaW1lLFxuXG4gICAgZGVidWcobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgICAgIG91dHB1dExvZyhjcmVhdGVFbnRyeSgnZGVidWcnLCBtZXNzYWdlLCBjb250ZXh0KSlcbiAgICB9LFxuXG4gICAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgICAgb3V0cHV0TG9nKGNyZWF0ZUVudHJ5KCdpbmZvJywgbWVzc2FnZSwgY29udGV4dCkpXG4gICAgfSxcblxuICAgIHdhcm4obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIHtcbiAgICAgIG91dHB1dExvZyhjcmVhdGVFbnRyeSgnd2FybicsIG1lc3NhZ2UsIGNvbnRleHQpKVxuICAgIH0sXG5cbiAgICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycm9yPzogdW5rbm93biwgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB7XG4gICAgICBvdXRwdXRMb2coY3JlYXRlRW50cnkoJ2Vycm9yJywgbWVzc2FnZSwgY29udGV4dCwgZXJyb3IpKVxuICAgIH0sXG5cbiAgICBkdXJhdGlvbigpIHtcbiAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgfSxcblxuICAgIGxvZ1JlcXVlc3RDb21wbGV0ZShzdGF0dXNDb2RlOiBudW1iZXIsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICBjb25zdCBsZXZlbDogTG9nTGV2ZWwgPSBzdGF0dXNDb2RlID49IDUwMCA/ICdlcnJvcicgOiBzdGF0dXNDb2RlID49IDQwMCA/ICd3YXJuJyA6ICdpbmZvJ1xuXG4gICAgICBvdXRwdXRMb2coY3JlYXRlRW50cnkobGV2ZWwsICdSZXF1ZXN0IGNvbXBsZXRlZCcsIHtcbiAgICAgICAgLi4uY29udGV4dCxcbiAgICAgICAgc3RhdHVzQ29kZSxcbiAgICAgICAgZHVyYXRpb25NczogZHVyYXRpb25cbiAgICAgIH0pKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgdXNlZnVsIHJlcXVlc3QgbWV0YWRhdGEgZm9yIGxvZ2dpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlcXVlc3RNZXRhZGF0YShyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgY29uc3QgdXJsID0gbmV3IFVSTChyZXF1ZXN0LnVybClcblxuICByZXR1cm4ge1xuICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG4gICAgcGF0aDogdXJsLnBhdGhuYW1lLFxuICAgIHF1ZXJ5OiBPYmplY3QuZnJvbUVudHJpZXModXJsLnNlYXJjaFBhcmFtcyksXG4gICAgdXNlckFnZW50OiByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd1c2VyLWFnZW50Jyk/LnNsaWNlKDAsIDEwMCksXG4gICAgaXA6IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpPy5zcGxpdCgnLCcpWzBdPy50cmltKClcbiAgICAgIHx8IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtcmVhbC1pcCcpXG4gICAgICB8fCAndW5rbm93bidcbiAgfVxufVxuXG4vKipcbiAqIFN0YW5kYWxvbmUgbG9nZ2VyIGZvciBub24tcmVxdWVzdCBjb250ZXh0cyAoc2VydmljZXMsIGpvYnMsIGV0Yy4pXG4gKi9cbmV4cG9ydCBjb25zdCBsb2cgPSB7XG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSB7XG4gICAgb3V0cHV0TG9nKHtcbiAgICAgIGxldmVsOiAnZGVidWcnLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgY29udGV4dFxuICAgIH0pXG4gIH0sXG5cbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgIG91dHB1dExvZyh7XG4gICAgICBsZXZlbDogJ2luZm8nLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgY29udGV4dFxuICAgIH0pXG4gIH0sXG5cbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgIG91dHB1dExvZyh7XG4gICAgICBsZXZlbDogJ3dhcm4nLFxuICAgICAgbWVzc2FnZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgY29udGV4dFxuICAgIH0pXG4gIH0sXG5cbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IHVua25vd24sIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikge1xuICAgIG91dHB1dExvZyh7XG4gICAgICBsZXZlbDogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGNvbnRleHQsXG4gICAgICBlcnJvcjogZXJyb3IgPyBnZXRFcnJvckRldGFpbHMoZXJyb3IpIDogdW5kZWZpbmVkXG4gICAgfSlcbiAgfVxufVxuXG4vKipcbiAqIENvbmZpZ3VyZSBnbG9iYWwgbG9nZ2VyIHNldHRpbmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVMb2dnZXIoY29uZmlnOiBQYXJ0aWFsPExvZ2dlckNvbmZpZz4pOiB2b2lkIHtcbiAgT2JqZWN0LmFzc2lnbihnbG9iYWxDb25maWcsIGNvbmZpZylcbn1cblxuLyoqXG4gKiBIaWdoZXItb3JkZXIgZnVuY3Rpb24gdG8gd3JhcCBBUEkgcm91dGUgaGFuZGxlcnMgd2l0aCBsb2dnaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoUmVxdWVzdExvZ2dpbmc8VD4oXG4gIGhhbmRsZXI6IChyZXF1ZXN0OiBOZXh0UmVxdWVzdCwgbG9nZ2VyOiBSZXF1ZXN0TG9nZ2VyKSA9PiBQcm9taXNlPFQ+XG4pIHtcbiAgcmV0dXJuIGFzeW5jIChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IFByb21pc2U8VD4gPT4ge1xuICAgIGNvbnN0IGxvZ2dlciA9IGNyZWF0ZVJlcXVlc3RMb2dnZXIocmVxdWVzdClcbiAgICBjb25zdCBtZXRhZGF0YSA9IGdldFJlcXVlc3RNZXRhZGF0YShyZXF1ZXN0KVxuXG4gICAgbG9nZ2VyLmluZm8oJ1JlcXVlc3Qgc3RhcnRlZCcsIG1ldGFkYXRhKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIocmVxdWVzdCwgbG9nZ2VyKVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1JlcXVlc3QgZmFpbGVkJywgZXJyb3IsIG1ldGFkYXRhKVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRFcnJvckRldGFpbHMiLCJMT0dfTEVWRUxfUFJJT1JJVFkiLCJkZWJ1ZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJnbG9iYWxDb25maWciLCJzZXJ2aWNlTmFtZSIsImVudmlyb25tZW50IiwicHJvY2VzcyIsIm1pbkxldmVsIiwib3V0cHV0TG9nIiwiZW50cnkiLCJtaW5Qcmlvcml0eSIsImVudHJ5UHJpb3JpdHkiLCJsZXZlbCIsImxvZ09iamVjdCIsInNlcnZpY2UiLCJlbnYiLCJsb2dTdHJpbmciLCJKU09OIiwic3RyaW5naWZ5IiwiY29uc29sZSIsImNyZWF0ZVJlcXVlc3RMb2dnZXIiLCJyZXF1ZXN0IiwicmVxdWVzdElkIiwiaGVhZGVycyIsImdldCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiY3JlYXRlRW50cnkiLCJtZXNzYWdlIiwiY29udGV4dCIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwiZHVyYXRpb25NcyIsInVuZGVmaW5lZCIsImR1cmF0aW9uIiwibG9nUmVxdWVzdENvbXBsZXRlIiwic3RhdHVzQ29kZSIsImdldFJlcXVlc3RNZXRhZGF0YSIsInVybCIsIlVSTCIsIm1ldGhvZCIsInBhdGgiLCJwYXRobmFtZSIsInF1ZXJ5IiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJzZWFyY2hQYXJhbXMiLCJ1c2VyQWdlbnQiLCJzbGljZSIsImlwIiwic3BsaXQiLCJ0cmltIiwibG9nIiwiY29uZmlndXJlTG9nZ2VyIiwiY29uZmlnIiwiYXNzaWduIiwid2l0aFJlcXVlc3RMb2dnaW5nIiwiaGFuZGxlciIsImxvZ2dlciIsIm1ldGFkYXRhIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/logging/structured.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase/server.ts":
/*!************************************!*\
  !*** ./src/lib/supabase/server.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nasync function createClient() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://maandodhonjolrmcxivo.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hYW5kb2Rob25qb2xybWN4aXZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg1NDg3NjIsImV4cCI6MjA2NDEyNDc2Mn0.Ku89ldqO_b1ptFBQFtQPhzmmnrg04LpcMeCw21sjlAE\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                try {\n                    cookiesToSet.forEach(({ name, value, options })=>{\n                        cookieStore.set(name, value, options);\n                    });\n                } catch  {\n                // Server components can't set cookies\n                }\n            }\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlL3NlcnZlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0Q7QUFDWjtBQUcvQixlQUFlRTtJQUNwQixNQUFNQyxjQUFjLE1BQU1GLHFEQUFPQTtJQUVqQyxPQUFPRCxpRUFBa0JBLENBQ3ZCSSwwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QztRQUNFSCxTQUFTO1lBQ1BPO2dCQUNFLE9BQU9MLFlBQVlLLE1BQU07WUFDM0I7WUFDQUMsUUFBT0MsWUFBNkQ7Z0JBQ2xFLElBQUk7b0JBQ0ZBLGFBQWFDLE9BQU8sQ0FBQyxDQUFDLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUU7d0JBQzVDWCxZQUFZWSxHQUFHLENBQUNILE1BQU1DLE9BQU9DO29CQUMvQjtnQkFDRixFQUFFLE9BQU07Z0JBQ04sc0NBQXNDO2dCQUN4QztZQUNGO1FBQ0Y7SUFDRjtBQUVKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGxhbm5ldGljLXBsYXRmb3JtLy4vc3JjL2xpYi9zdXBhYmFzZS9zZXJ2ZXIudHM/MmU4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJ1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcbmltcG9ydCB0eXBlIHsgRGF0YWJhc2UgfSBmcm9tICdAL3R5cGVzL2RiJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ2xpZW50KCkge1xuICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxuXG4gIHJldHVybiBjcmVhdGVTZXJ2ZXJDbGllbnQ8RGF0YWJhc2U+KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0QWxsKCkge1xuICAgICAgICAgIHJldHVybiBjb29raWVTdG9yZS5nZXRBbGwoKVxuICAgICAgICB9LFxuICAgICAgICBzZXRBbGwoY29va2llc1RvU2V0OiB7IG5hbWU6IHN0cmluZzsgdmFsdWU6IHN0cmluZzsgb3B0aW9uczogYW55IH1bXSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb29raWVzVG9TZXQuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSwgb3B0aW9ucyB9KSA9PiB7XG4gICAgICAgICAgICAgIGNvb2tpZVN0b3JlLnNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAvLyBTZXJ2ZXIgY29tcG9uZW50cyBjYW4ndCBzZXQgY29va2llc1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfVxuICApXG59Il0sIm5hbWVzIjpbImNyZWF0ZVNlcnZlckNsaWVudCIsImNvb2tpZXMiLCJjcmVhdGVDbGllbnQiLCJjb29raWVTdG9yZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImdldEFsbCIsInNldEFsbCIsImNvb2tpZXNUb1NldCIsImZvckVhY2giLCJuYW1lIiwidmFsdWUiLCJvcHRpb25zIiwic2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/cookie","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclients%2Froute&page=%2Fapi%2Fclients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclients%2Froute.ts&appDir=%2FUsers%2Fadeomosanya%2FDocuments%2Fifa-professional-portal%2Fifa-platform%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fadeomosanya%2FDocuments%2Fifa-professional-portal%2Fifa-platform&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();